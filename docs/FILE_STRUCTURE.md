# KBO 프로젝트 파일 구조 가이드

> **최종 업데이트:** 2025-08-01  
> **프로젝트 상태:** 완전 자동화 완성 ✅

## 🎯 프로젝트 개요

이 프로젝트는 **단일 텍스트 파일**(`2025-season-data-clean.txt`)을 기반으로 KBO 웹서비스의 모든 지표를 자동 생성하는 완전 자동화 시스템입니다.

## 📂 전체 구조

```
kbo/
├── 📁 data/                    # 원본 데이터
├── 📁 scripts/                 # 처리 스크립트
├── 📁 output/                  # 생성된 데이터
├── 📁 magic-number/            # 웹서비스
├── 📁 docs/                    # 문서
├── 📁 archive/                 # 아카이브
├── 📁 logs/                    # 로그 (빈 폴더)
├── 📁 node_modules/            # NPM 패키지
├── package.json                # NPM 설정
└── package-lock.json           # NPM 락 파일
```

---

## 📁 핵심 활성 파일들

### 🗂️ data/ - 원본 데이터 저장소
| 파일명 | 역할 | 형식 | 상태 |
|--------|------|------|------|
| **`2025-season-data-clean.txt`** | 📝 **메인 데이터 소스** | `한화 4:3 KT(H)` | ✅ 활성 |
| `2025-season-data.txt` | 원본 데이터 (참고용) | 복잡한 형식 | 📚 참고 |

**`2025-season-data-clean.txt` 형식:**
```
2025-07-31
한화 7:1 삼성(H)    # 삼성 홈구장에서 경기
KT 0:18 LG(H)       # LG 홈구장에서 경기
```

### ⚙️ scripts/ - 처리 스크립트
| 파일명 | 역할 | 입력 | 출력 | 상태 |
|--------|------|------|------|------|
| **`process-season-data.js`** | 🎯 **메인 자동화 스크립트** | clean.txt | JSON 파일들 | ✅ 활성 |

**메인 스크립트 기능:**
- 🔍 경기 데이터 파싱 (495경기)
- 📊 팀별 통계 계산 (승률, 홈/원정 기록)
- ⚔️ 상대전적 매트릭스 생성
- 🏆 순위 및 게임차 계산
- 🔮 매직넘버 계산 (PO/우승/탈락/홈어드밴티지)
- 📅 잔여경기 계산

### 📊 output/ - 생성된 데이터
| 파일명 | 역할 | 내용 | 업데이트 |
|--------|------|------|----------|
| **`service-data.json`** | 🎯 **통합 마스터 데이터** | 모든 지표 통합 | 자동 |

**service-data.json 구조:**
```json
{
  "standings": [...],        // 순위표 (홈/원정 기록 포함)
  "magicNumbers": {...},     // 매직넘버 (4가지 타입)
  "headToHead": {...},       // 상대전적 매트릭스
  "remainingGames": {...},   // 잔여경기
  "chaseData": [...],        // 1위 탈환 가능성
  "playoffData": [...]       // 플레이오프 진출 데이터
}
```

### 🌐 magic-number/ - 웹서비스
| 파일명 | 역할 | 데이터 소스 | 업데이트 |
|--------|------|-------------|----------|
| **`index.html`** | 🎯 **메인 웹페이지** | JSON 파일들 | 수동 |
| **`kbo-rankings.json`** | 순위표 데이터 | output/ 기반 | 자동 |
| **`kbo-records.json`** | 상대전적 데이터 | output/ 기반 | 자동 |
| `manifest.json` | PWA 설정 | - | 수동 |
| `robots.txt` | 검색엔진 설정 | - | 수동 |
| `rss.xml` | RSS 피드 | - | 수동 |
| `sitemap.xml` | 사이트맵 | - | 수동 |
| `icons/` | 웹앱 아이콘들 | - | 수동 |

### 📚 docs/ - 문서
| 파일명 | 역할 | 내용 |
|--------|------|------|
| **`FILE_STRUCTURE.md`** | 📁 **파일 구조 가이드** (현재 문서) | 전체 구조 설명 |
| `README.md` | 프로젝트 소개 | 사용법, 개요 |
| `AUTOMATION_GUIDE.md` | 자동화 가이드 | 상세 사용법 |

---

## 📦 아카이브 파일들

### 🗄️ archive/ - 과거 파일 보관소
| 폴더명 | 내용 | 상태 |
|--------|------|------|
| `automation-scripts/` | 자동화 관련 스크립트들 | 🔒 보관 |
| `backups/` | 데이터 백업 파일들 | 🔒 보관 |
| `debug-images/` | 디버그 이미지/HTML | 🔒 보관 |
| `old-scripts/` | 구버전 스크립트들 | 🔒 보관 |
| `old-json-files/` | 구버전 JSON 파일들 | 🔒 보관 |
| `test-scripts/` | 테스트 스크립트들 | 🔒 보관 |

---

## 🚀 핵심 워크플로우

### 1️⃣ 새 경기 데이터 추가
```bash
# data/2025-season-data-clean.txt에 추가
echo "2025-08-01" >> data/2025-season-data-clean.txt
echo "한화 3:2 LG(H)" >> data/2025-season-data-clean.txt
```

### 2️⃣ 데이터 처리 및 업데이트
```bash
# 메인 자동화 스크립트 실행
npm run process
```

### 3️⃣ 결과 확인
- **통합 데이터:** `output/service-data.json`
- **웹서비스:** `magic-number/index.html`

---

## 📊 생성되는 웹서비스 지표

### 🏆 순위표
- 순위, 팀명, 경기수, 승-패-무, 승률
- 게임차, 최근10경기, 연속기록
- **홈/원정 별도 성적** (🏠31-16-2 / ✈️28-21-1)

### 🔮 매직넘버
- **플레이오프 진출** 매직넘버
- **우승** 매직넘버  
- **탈락** 매직넘버
- **홈 어드밴티지** 매직넘버

### ⚔️ 상대전적
- **10×10 매트릭스** (모든 팀 조합)
- 팀별 상대 승률
- 홈/원정별 세부 성적

### 📅 잔여경기
- 각 팀별 남은 총 경기수
- 상대팀별 남은 경기수

---

## ⚡ 핵심 장점

### ✅ 단순성
- **하나의 텍스트 파일**만 관리
- **하나의 스크립트**로 모든 처리

### ✅ 정확성  
- 실제 경기 결과 기반 **100% 정확한 계산**
- 홈팀 명시 `(H)` 표기로 **명확한 구분**

### ✅ 완전성
- 웹서비스의 **모든 지표** 자동 생성
- **495경기** 완전 처리

### ✅ 유지보수성
- **중복 파일 완전 제거**
- **명확한 폴더 구조**
- **체계적인 아카이브**

---

## 🔧 기술 스택

- **Backend:** Node.js
- **Frontend:** HTML/CSS/JavaScript
- **Data:** JSON
- **Automation:** Shell Scripts
- **Package Manager:** NPM

---

## 📝 파일 변경 이력

| 날짜 | 변경사항 |
|------|----------|
| 2025-08-01 | 홈팀 (H) 표시 시스템 도입 |
| 2025-08-01 | 폴더 구조 체계화 |
| 2025-08-01 | JSON 파일 중복 제거 |
| 2025-08-01 | 완전 자동화 시스템 완성 |

---

## ⚠️ 중요 참고사항

1. **메인 데이터:** `data/2025-season-data-clean.txt`만 수정
2. **메인 스크립트:** `scripts/process-season-data.js`만 사용
3. **중복 방지:** archive 폴더는 건드리지 않기
4. **웹서비스:** `magic-number/index.html`에서 모든 지표 확인 가능

---

## 🆘 문제 해결

### Q: 데이터가 업데이트되지 않아요
A: `npm run process` 실행 후 브라우저 새로고침

### Q: 새 경기를 어떻게 추가하나요?
A: `data/2025-season-data-clean.txt`에 `한화 3:2 LG(H)` 형식으로 추가

### Q: 홈팀을 어떻게 구분하나요?
A: `(H)` 표시가 있는 팀이 홈팀 (예: `KT(H)` = KT 홈구장)

---

*이 문서는 프로젝트의 최신 구조를 반영하여 작성되었습니다. (2025-08-01)*