
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1200, initial-scale=0.5, user-scalable=yes">
    
    <!-- SEO 메타 태그 -->
    <title>KBO 매직넘버 계산기 2025 - 플레이오프 진출 및 우승 조건</title>
    <meta name="description" content="2025 KBO 리그 매직넘버 계산기. 플레이오프 진출 조건, 우승 가능성, 팀별 순위표와 상대전적을 한눈에 확인하세요. 한화, LG, 롯데 등 10개 팀 현황 업데이트">
    <meta name="keywords" content="KBO, 매직넘버, 플레이오프, 우승, 야구, 한화, LG, 롯데, KT, KIA, 삼성, SSG, NC, 두산, 키움, 2025시즌">
    <meta name="author" content="SanghunBruceHam">
    <meta name="robots" content="index, follow">
    <meta name="naver-site-verification" content="bc59fce1d576065745f3c3bb6cb107683e4104b7" />
    <link rel="canonical" href="https://kbo.mahalohana-bruce.com/magic-number/">
    
    <!-- Open Graph 태그 -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="KBO 매직넘버 계산기 2025 - 플레이오프 진출 및 우승 조건">
    <meta property="og:description" content="2025 KBO 리그 매직넘버 계산기. 플레이오프 진출 조건, 우승 가능성, 팀별 순위표와 상대전적을 한눈에 확인하세요.">
    <meta property="og:url" content="https://kbo.mahalohana-bruce.com/magic-number/">
    <meta property="og:site_name" content="KBO 매직넘버 계산기">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:image" content="https://kbo.mahalohana-bruce.com/magic-number/icons/kbo-magic-number-thumbnail.png">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta property="og:image:alt" content="KBO 매직넘버 계산기">
    
    <!-- Twitter Card 태그 -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="KBO 매직넘버 계산기 2025">
    <meta name="twitter:description" content="2025 KBO 리그 매직넘버 계산기. 플레이오프 진출 조건과 우승 가능성을 확인하세요.">
    <meta name="twitter:image" content="https://kbo.mahalohana-bruce.com/magic-number/icons/kbo-magic-number-thumbnail.png">
    <meta name="twitter:image:alt" content="KBO 매직넘버 계산기">
    
    <!-- 추가 SEO 태그 -->
    <meta name="theme-color" content="#1a237e">
    <meta name="format-detection" content="telephone=no">
    
    <!-- 사이트맵 및 RSS 링크 -->
    <link rel="sitemap" type="application/xml" title="Sitemap" href="/magic-number/sitemap.xml">
    <link rel="alternate" type="application/rss+xml" title="KBO 매직넘버 업데이트" href="/magic-number/rss.xml">
    
    <!-- 파비콘 -->
    <link rel="icon" type="image/png" sizes="32x32" href="./icons/kbo-magic-number-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./icons/kbo-magic-number-icon.png">
    <link rel="apple-touch-icon" href="./icons/kbo-magic-number-icon.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/magic-number/manifest.json">
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- JSON-LD 구조화 데이터 -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "KBO 매직넘버 계산기",
        "description": "2025 KBO 리그 매직넘버 계산기. 플레이오프 진출 조건, 우승 가능성, 팀별 순위표와 상대전적을 제공합니다.",
        "url": "https://kbo.mahalohana-bruce.com/magic-number/",
        "applicationCategory": "SportsApplication",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "KRW"
        },
        "creator": {
            "@type": "Organization",
            "name": "mahalohana-bruce.com"
        },
        "about": {
            "@type": "SportsOrganization",
            "name": "KBO 리그",
            "sport": "Baseball"
        }
    }
    </script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TDV2VSSNHN"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-TDV2VSSNHN');
    </script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5508768187151867" crossorigin="anonymous"></script>
    
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #1a237e;
            --secondary-color: #3949ab;
            --accent-color: #ff6b6b;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --bg-primary: #f5f7fa;
            --bg-secondary: #ffffff;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --border-color: #e0e0e0;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 8px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 16px rgba(0,0,0,0.16);
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 40px 0;
            margin: -20px -20px 30px -20px;
            box-shadow: var(--shadow-md);
        }

        h1 {
            text-align: center;
            color: white;
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .subtitle {
            text-align: center;
            color: rgba(255,255,255,0.9);
            margin-top: 10px;
            font-size: 1.1rem;
            font-weight: 300;
        }

        .content-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .cards-grid {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-bottom: 20px;
        }

        .card {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: visible;
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            z-index: 1;
        }
        

        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .card h2 {
            color: var(--text-primary);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border-color);
            font-size: 1.4rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #chase-analysis, #playoff-condition {
            position: relative;
            z-index: 100000;
        }

        #chase-table, #playoff-table {
            position: relative;
            z-index: 100001;
        }


        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(0, 0, 0, 0.08);
        }

        table {
            width: 100%;
            min-width: 600px;
            border-collapse: separate;
            border-spacing: 0;
            font-size: 0.95rem;
            border-radius: 8px;
            overflow: visible;
        }


        th, td {
            padding: 16px 12px;
            text-align: center;
            position: relative;
            line-height: 1.4;
        }
        
        /* 팀 순위표 필드별 너비 조정 */
        #standings-table th:nth-child(1), 
        #standings-table td:nth-child(1) { width: 5%; }  /* 순위 */
        
        #standings-table th:nth-child(2), 
        #standings-table td:nth-child(2) { width: 10%; text-align: left; padding-left: 20px; }  /* 팀명 */
        
        #standings-table th:nth-child(3), 
        #standings-table td:nth-child(3) { width: 6%; }  /* 경기 */
        
        #standings-table th:nth-child(4), 
        #standings-table td:nth-child(4) { width: 5%; }  /* 승 */
        
        #standings-table th:nth-child(5), 
        #standings-table td:nth-child(5) { width: 5%; }  /* 패 */
        
        #standings-table th:nth-child(6), 
        #standings-table td:nth-child(6) { width: 5%; }  /* 무 */
        
        #standings-table th:nth-child(7), 
        #standings-table td:nth-child(7) { width: 7%; }  /* 승률 */
        
        #standings-table th:nth-child(8), 
        #standings-table td:nth-child(8) { width: 12%; font-size: 0.8rem; }  /* 홈/원정 */
        
        #standings-table th:nth-child(9), 
        #standings-table td:nth-child(9) { width: 7%; }  /* 게임차 */
        
        #standings-table th:nth-child(10), 
        #standings-table td:nth-child(10) { width: 7%; }  /* 잔여경기 */
        
        #standings-table th:nth-child(11), 
        #standings-table td:nth-child(11) { width: 14%; }  /* 최근10경기 */
        
        #standings-table th:nth-child(12), 
        #standings-table td:nth-child(12) { width: 7%; }  /* 연속 */
        
        #standings-table th:nth-child(13), 
        #standings-table td:nth-child(13) { width: 9%; }  /* 매직넘버 */

        th {
            background: var(--primary-color);
            color: white;
            font-weight: 500;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: sticky;
            top: 0;
            z-index: 10;
            text-align: center !important;
            vertical-align: middle;
        }

        th:first-child {
            border-top-left-radius: 8px;
        }

        th:last-child {
            border-top-right-radius: 8px;
        }

        tbody tr {
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }
        tbody tr:last-child {
            border-bottom: none;
        }

        tbody tr:hover {
            background-color: rgba(59, 130, 246, 0.08) !important;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        tbody tr:nth-child(even) {
            background-color: rgba(248, 250, 252, 0.8);
        }
        tbody tr:nth-child(odd) {
            background-color: rgba(255, 255, 255, 0.9);
        }

        td {
            font-weight: 400;
        }

        td:first-child {
            font-weight: 700;
            color: var(--primary-color);
        }

        .rank-1 { 
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 235, 59, 0.08)) !important;
            border-left: 4px solid #ffd700;
            font-weight: 700;
        }
        .rank-2 { 
            background: linear-gradient(135deg, rgba(192, 192, 192, 0.15), rgba(224, 224, 224, 0.08)) !important;
            border-left: 4px solid #c0c0c0;
        }
        .rank-3 { 
            background: linear-gradient(135deg, rgba(205, 127, 50, 0.15), rgba(255, 152, 0, 0.08)) !important;
            border-left: 4px solid #cd7f32;
        }
        .playoff { 
            background: linear-gradient(135deg, rgba(26, 35, 126, 0.12), rgba(57, 73, 171, 0.06)) !important;
            border-left: 4px solid var(--primary-color);
        }

        .magic-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-color), #ff8787);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            background-color: rgba(255, 107, 107, 0.1);
            position: relative;
        }

        .magic-number::after {
            content: attr(data-label);
            position: absolute;
            top: 5px;
            right: 10px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            -webkit-text-fill-color: var(--text-secondary);
        }

        .status-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .clinched { 
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(76, 175, 80, 0.3));
            color: #2e7d32;
            box-shadow: 0 2px 4px rgba(76, 175, 80, 0.3);
        }
        
        .contending { 
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 193, 7, 0.3));
            color: #f57c00;
            box-shadow: 0 2px 4px rgba(255, 193, 7, 0.3);
        }

        .team-logo {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin-right: 8px;
            vertical-align: middle;
        }

        .vs-grid {
            display: grid;
            grid-template-columns: 0.8fr repeat(10, 1fr);
            gap: 2px;
            font-size: 0.9rem;
        }
        .vs-grid > div {
            text-align: center;
            vertical-align: middle;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 60px;
            padding: 8px 4px;
            border-radius: 6px;
            line-height: 1.3;
        }
        .vs-header {
            background: rgba(0, 0, 0, 0.05) !important;
            font-weight: 600 !important;
            font-size: 0.85rem !important;
            border: 1px solid rgba(0, 0, 0, 0.1) !important;
        }
        .vs-team {
            background: rgba(0, 0, 0, 0.03) !important;
            font-weight: 600 !important;
            font-size: 0.9rem !important;
            border: 1px solid rgba(0, 0, 0, 0.08) !important;
        }

        .help-icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
            margin-left: 4px;
            cursor: pointer;
            line-height: 16px;
            transition: all 0.2s ease;
        }

        /* 에러 알림 스타일 */
        .error-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #fee;
            border: 1px solid #fcc;
            border-radius: 8px;
            padding: 12px 16px;
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.15);
            z-index: 10000;
            max-width: 350px;
            font-size: 0.9rem;
            animation: slideInRight 0.3s ease;
        }
        
        .error-notification.success {
            background: #f0f9ff;
            border-color: #0ea5e9;
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.15);
        }
        
        .error-notification .close-btn {
            float: right;
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            margin-left: 10px;
            color: #666;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .help-icon:hover {
            background: var(--primary-hover);
            transform: scale(1.1);
        }

        .tooltip {
            position: relative;
            z-index: 50000;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: #1a237e;
            color: #fff;
            text-align: left;
            border-radius: 8px;
            padding: 10px;
            position: absolute;
            z-index: 999999;
            top: 100%;
            left: 50%;
            margin-left: -150px;
            margin-top: 5px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            line-height: 1.4;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* 오른쪽 끝에 있는 툴팁을 위한 클래스 */
        .tooltip .tooltiptext.tooltip-left {
            left: auto;
            right: 0;
            margin-left: 0;
            margin-right: 0;
        }

        .tooltip .tooltiptext.tooltip-left::after {
            left: auto;
            right: 20px;
            margin-left: 0;
        }

        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            bottom: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: transparent transparent #1a237e transparent;
        }

        .tooltip:hover .tooltiptext,
        .tooltip.active .tooltiptext {
            visibility: visible;
            opacity: 1;
        }


        .scroll-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            z-index: 9999;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transform: translateY(20px);
        }

        .scroll-to-top:hover {
            background: var(--primary-hover);
            box-shadow: 0 6px 16px rgba(0,0,0,0.3);
        }
        
        .scroll-to-top.show:hover {
            transform: translateY(-2px);
        }

        .scroll-to-top.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        /* 쿠팡 광고 반응형 스타일 */
        .coupang-ad-wrapper {
            box-sizing: border-box;
        }
        
        .coupang-ad-wrapper > div,
        .coupang-ad-wrapper iframe {
            max-width: 100% !important;
            width: 100% !important;
        }
        
        /* PC에서 쿠팡 광고 크기 조정 - 카드 크기에 맞춤 */
        @media (min-width: 1025px) {
            .coupang-ad-wrapper {
                padding: 40px 60px !important;
            }
            
            .coupang-ad-wrapper > div:not([style*="font-size"]),
            .coupang-ad-wrapper iframe {
                transform: scale(0.95);
                transform-origin: center;
                margin: 0;
            }
        }
        
        /* 태블릿에서 쿠팡 광고 크기 조정 */
        
        /* 모바일에서 쿠팡 광고 크기 조정 */
        

        /* PC 버전 보기 버튼은 모바일에서만 표시 */
        @media (min-width: 769px) {
            #mobile-controls {
                display: none !important;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .vs-header, .vs-team, .vs-record {
            padding: 8px 4px;
            text-align: center;
            border: 1px solid #ddd;
        }

        .vs-header {
            background: #f8f9fa;
            color: #495057;
            font-weight: bold;
        }

        .vs-team {
            background: #f1f3f4;
            font-weight: bold;
        }

        .vs-record {
            background: white;
        }

        .vs-record.win { 
            background-color: rgba(76, 175, 80, 0.1);
            color: #2e7d32;
            font-weight: 600;
        }
        .vs-record.loss { 
            background-color: rgba(244, 67, 54, 0.1);
            color: #d32f2f;
            font-weight: 600;
        }

        .team-info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 20px;
        }

        .team-basic-info, .magic-info {
            background: rgba(26, 35, 126, 0.02);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .stat-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .stat-label {
            font-weight: 500;
            color: var(--text-secondary);
        }

        .stat-value {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .stat-card {
            text-align: center;
            padding: 12px;
            background: rgba(26, 35, 126, 0.02);
            border-radius: 8px;
            border: 1px solid rgba(26, 35, 126, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .stat-card .stat-label {
            text-align: center;
            width: 100%;
            margin-bottom: 8px;
        }
        
        .stat-card .stat-value {
            text-align: center;
            width: 100%;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            animation: fadeInUp 0.6s ease-out;
            overflow: visible; /* 툴팁이 카드 경계를 넘을 수 있도록 */
        }
        
        .table-container {
            overflow-x: auto;
            overflow-y: visible; /* 툴팁이 세로로 넘을 수 있도록 */
        }

        .card:nth-child(1) { animation-delay: 0.1s; }
        .card:nth-child(2) { animation-delay: 0.2s; }
        .card:nth-child(3) { animation-delay: 0.3s; }

        /* 챔피언십 섹션 특별 효과 */
        @keyframes logoGlow {
            0% { 
                filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1)); 
                transform: scale(1);
            }
            100% { 
                filter: drop-shadow(0 4px 8px rgba(26, 35, 126, 0.2)) drop-shadow(0 0 12px rgba(26, 35, 126, 0.1)); 
                transform: scale(1.02);
            }
        }

        /* 매직넘버 강조 애니메이션 */
        @keyframes magicPulse {
            0% { 
                transform: scale(1);
                text-shadow: 0 2px 8px rgba(255, 107, 53, 0.4);
            }
            50% { 
                transform: scale(1.05);
                text-shadow: 0 4px 16px rgba(255, 107, 53, 0.6);
            }
            100% { 
                transform: scale(1);
                text-shadow: 0 2px 8px rgba(255, 107, 53, 0.4);
            }
        }

        .card:nth-child(4) { animation-delay: 0.4s; }
        .card:nth-child(5) { animation-delay: 0.5s; }

        .loading {
            position: relative;
            opacity: 0.7;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* 정렬 가능한 테이블 헤더 스타일 */
        .sortable-header {
            cursor: pointer;
            user-select: none;
            position: relative;
            transition: all 0.3s ease;
            padding-right: 20px !important;
        }

        .sortable-header:hover {
            background: rgba(57, 73, 171, 0.8);
            color: rgba(255, 255, 255, 0.95);
        }

        .sort-arrow {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8rem;
            opacity: 0.6;
            transition: all 0.2s ease;
        }

        .sortable-header:hover .sort-arrow {
            opacity: 1;
        }

        .sortable-header.sort-asc .sort-arrow {
            opacity: 1;
            color: var(--accent-color);
        }

        .sortable-header.sort-desc .sort-arrow {
            opacity: 1;
            color: var(--accent-color);
        }

        /* 테이블 행 정렬 애니메이션 */
        tbody tr {
            transition: all 0.3s ease;
        }

        .sorting tbody tr {
            opacity: 0.7;
        }



    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>🏆 KBO 매직넘버 계산기</h1>
            <div class="subtitle">2025 KBO 리그 매직넘버 계산기<br>플레이오프 진출 조건, 우승 가능성, 팀별 순위표와 상대전적을 한눈에 확인하세요</div>
        </div>
    </div>
    
    <div class="container">
        <div class="content-container">
            
            <!-- 요약 대시보드 -->
            <div style="width: 90%; max-width: 1200px; margin: 0 auto;">
                <div class="summary-dashboard" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div class="summary-card" style="background: var(--bg-secondary); border-radius: 12px; padding: 20px; box-shadow: var(--shadow-sm); border: 1px solid var(--border-color); text-align: center; transition: all 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='var(--shadow-md)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='var(--shadow-sm)'">
                    <h3 style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 10px;">🏆 현재 1위</h3>
                    <div class="value" id="first-place-team" style="font-size: 2rem; font-weight: 700; color: var(--primary-color);">-</div>
                    <div class="sub-value" id="first-place-magic" style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 5px;">매직넘버: -</div>
                </div>
                
                <div class="summary-card" style="background: var(--bg-secondary); border-radius: 12px; padding: 20px; box-shadow: var(--shadow-sm); border: 1px solid var(--border-color); text-align: center; transition: all 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='var(--shadow-md)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='var(--shadow-sm)'">
                    <h3 style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 10px;">✅ 플레이오프 확정</h3>
                    <div class="value" id="playoff-confirmed-teams" style="font-size: 2rem; font-weight: 700; color: var(--success-color);">-</div>
                    <div class="sub-value" id="playoff-confirmed-desc" style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 5px;">72승 이상 달성</div>
                </div>
                
                <div class="summary-card" style="background: var(--bg-secondary); border-radius: 12px; padding: 20px; box-shadow: var(--shadow-sm); border: 1px solid var(--border-color); text-align: center; transition: all 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='var(--shadow-md)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='var(--shadow-sm)'">
                    <h3 style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 10px;">🔥 최고 연승팀</h3>
                    <div class="value" id="best-streak-team" style="font-size: 2rem; font-weight: 700; color: var(--warning-color);">-</div>
                    <div class="sub-value" id="best-streak-count" style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 5px;">-</div>
                </div>
                
                <div class="summary-card" style="background: var(--bg-secondary); border-radius: 12px; padding: 20px; box-shadow: var(--shadow-sm); border: 1px solid var(--border-color); text-align: center; transition: all 0.3s ease; cursor: pointer;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='var(--shadow-md)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='var(--shadow-sm)'">
                    <h3 style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 10px;">📊 최근 10경기 1위팀</h3>
                    <div class="value" id="recent-best-team" style="font-size: 2rem; font-weight: 700; color: var(--primary-color);">-</div>
                    <div class="sub-value" id="recent-best-record" style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 5px;">-</div>
                </div>
            </div>
            </div>

            <div class="cards-grid">
                <!-- 팀 순위 테이블 -->
                <div class="card">
                    <h2>📊 팀 순위표</h2>
                    <div class="ranking-legend" style="font-size: 0.9rem; color: #666; line-height: 1.4; margin-bottom: 15px;">
                        <strong>순위별 진출권:</strong> 
                        <span style="color: #ffd700; font-weight: 600;">■ 1위</span> 정규시즌 우승 | 
                        <span style="color: #c0c0c0; font-weight: 600;">■ 2위</span> 플레이오프 직행 | 
                        <span style="color: #cd7f32; font-weight: 600;">■ 3위</span> 준플레이오프 직행 | 
                        <span style="color: #1a237e; font-weight: 600;">■ 4-5위</span> 와일드카드
                    </div>
                    <div style="text-align: right; font-size: 0.75rem; color: #999; margin-bottom: 15px;">
                        📊 <span class="data-load-time">2025. 8. 1. 오후 11:42 KBO 공식</span>
                    </div>
                    <div class="table-container">
                        <table id="standings-table">
                            <thead>
                                <tr>
                                    <th class="sortable-header" data-sort="rank" onclick="sortTable('standings', 'rank')">
                                        순위 <span class="sort-arrow">↕</span>
                                    </th>
                                    <th>팀명</th>
                                    <th class="sortable-header" data-sort="games" onclick="sortTable('standings', 'games')">
                                        경기 <span class="sort-arrow">↕</span>
                                    </th>
                                    <th class="sortable-header" data-sort="wins" onclick="sortTable('standings', 'wins')">
                                        승 <span class="sort-arrow">↕</span>
                                    </th>
                                    <th class="sortable-header" data-sort="losses" onclick="sortTable('standings', 'losses')">
                                        패 <span class="sort-arrow">↕</span>
                                    </th>
                                    <th class="sortable-header" data-sort="draws" onclick="sortTable('standings', 'draws')">
                                        무 <span class="sort-arrow">↕</span>
                                    </th>
                                    <th class="sortable-header" data-sort="winPct" onclick="sortTable('standings', 'winPct')">
                                        승률 <span class="sort-arrow">↕</span>
                                    </th>
                                    <th>홈/방문 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">홈 경기 성적 / 방문 경기 성적<br>🏠 홈구장에서의 승-패-무<br>✈️ 방문구장에서의 승-패-무</span></span></th>
                                    <th class="sortable-header" data-sort="gamesBehind" onclick="sortTable('standings', 'gamesBehind')">
                                        게임차 <span class="sort-arrow">↕</span>
                                    </th>
                                    <th>잔여경기</th>
                                    <th class="sortable-header" data-sort="recent10" onclick="sortTable('standings', 'recent10')">
                                        최근10경기 <span class="sort-arrow">↕</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">최근 10경기 승패 기록<br>- 현재 팀 상태를 파악하는 지표<br><br>색상 의미:<br>🟢 녹색: 7승 이상 (뜨거운 상승세)<br>🟡 노란색: 5-6승 (양호한 흐름)<br>🔴 빨간색: 4승 이하 (부진한 흐름)</span></span>
                                    </th>
                                    <th class="sortable-header" data-sort="streak" onclick="sortTable('standings', 'streak')">
                                        연속 <span class="sort-arrow">↕</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">현재 진행중인 연속 기록<br>- 승/패/무 중 가장 최근 연속 결과</span></span>
                                    </th>
                                    <th class="sortable-header" data-sort="magic" onclick="sortTable('standings', 'magic')">
                                        매직넘버 <span class="sort-arrow">↕</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">목표 달성에 필요한 승수<br>- 1위: 우승확정 필요승수<br>- 나머지: 플레이오프 진출 필요승수<br><br>계산법:<br>- 1위: (2위 최대가능승수 + 1) - 현재승수<br>- 나머지: 72승 - 현재승수</span></span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 광고 1: 기사간 배너 -->
                <div style="text-align: center; margin: 30px 0;">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-5508768187151867"
                         data-ad-slot="7298546648"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <!-- 1위팀 우승 조건 -->
                <div class="card">
                    <h2>👑 정규시즌 우승 조건</h2>
                    <div style="color: #666; font-size: 0.9rem; margin-bottom: 15px; text-align: right;">
                        📌 안내: 일부 지표는 수학적인 계산 결과입니다. 시즌이 진행되면서 현실화됩니다.
                    </div>
                    <div style="text-align: right; font-size: 0.75rem; color: #999; margin-bottom: 15px;">
                        📊 <span class="data-load-time">2025. 8. 1. 오후 11:42 KBO 공식</span>
                    </div>
                    <div id="championship-condition">
                        <div class="championship-header" style="text-align: center; margin-bottom: 24px;">
                            <!-- 깔끔하고 특별한 우승 조건 디스플레이 -->
                            <div style="
                                position: relative;
                                text-align: center;
                                padding: 24px 16px;
                                margin-bottom: 16px;
                                background: linear-gradient(135deg, rgba(26, 35, 126, 0.02) 0%, rgba(57, 73, 171, 0.04) 100%);
                                border-left: 4px solid #1a237e;
                                border-radius: 0 8px 8px 0;
                            ">
                                <!-- 팀 정보 -->
                                <div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 20px;">
                                    <span id="first-place-logo" style="
                                        font-size: 2.4rem; 
                                        filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
                                        position: relative;
                                        animation: logoGlow 3s ease-in-out infinite alternate;
                                    ">-</span>
                                    <h3 id="first-place-team-name" style="
                                        margin: 0; 
                                        font-size: 2rem; 
                                        font-weight: 700;
                                    ">-</h3>
                                </div>
                                
                                <!-- 매직넘버 중앙 강조 -->
                                <div style="text-align: center; margin-bottom: 20px;">
                                    <span id="championship-magic" style="
                                        font-size: 2.4rem;
                                        font-weight: 800;
                                        color: #FF6B35;
                                        text-shadow: 0 2px 8px rgba(255, 107, 53, 0.4);
                                        display: inline-block;
                                        animation: magicPulse 3s ease-in-out infinite;
                                    ">매직넘버: -</span>
                                </div>
                                
                                <!-- 추가 정보를 간단하게 표시 -->
                                <div style="
                                    text-align: center;
                                    font-size: 1.1rem;
                                    color: #555;
                                    line-height: 1.8;
                                ">
                                    <div style="margin-bottom: 8px;">
                                        <span style="color: #666;">잔여경기</span> 
                                        <strong id="remaining-games-top-display" style="color: #1a237e; margin-left: 8px;">-경기</strong>
                                    </div>
                                    <div>
                                        <span style="color: #666;">우승 필요 최소 승수</span> 
                                        <strong id="min-wins-top-display" style="color: #1a237e; margin-left: 8px;">-승</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="championship-stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 16px; margin-bottom: 20px;">
                            <div class="stat-card">
                                <div class="stat-label">현재 전적</div>
                                <div class="stat-value" id="first-place-record">-</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">현재 승률</div>
                                <div class="stat-value" id="first-place-winpct">-</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">최대가능 승수</div>
                                <div class="stat-value" id="first-place-max-wins">-</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">우승 필요 최소 승수 기준<br>필요승률 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">우승 필요 최소 승수 달성을 위한 승률<br><br>계산법:<br>- (우승 필요 최소 승수 - 현재승수) ÷ 잔여경기수<br><br>우승 필요 최소 승수 = 2위팀 최대가능승수 + 1</span></span></div>
                                <div class="stat-value" id="required-winpct">-</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">역대 1위 기준<br>필요승률 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">역대 1위 평균 84승 달성을 위해 잔여경기에서 얻어야 하는 승률<br><br>계산법:<br>- (84승 - 현재승수) ÷ 잔여경기수</span></span></div>
                                <div class="stat-value" id="historical-required-winpct">-</div>
                            </div>
                        </div>
                        
                        <div class="clinch-date-box" style="text-align: center; padding: 16px; background: linear-gradient(135deg, rgba(26, 35, 126, 0.1), rgba(57, 73, 171, 0.1)); border-radius: 12px; border: 1px solid var(--border-color);">
                            <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 4px;">
                                예상 우승확정일 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">우승이 확정될 것으로 예상되는 날짜<br><br>계산법:<br>- 오늘날짜 + 매직넘버만큼 경기일<br>- 월요일 무경기일 제외</span></span>
                            </div>
                            <div id="clinch-date" style="font-size: 1.2rem; font-weight: 600; color: var(--primary-color);">-</div>
                        </div>
                    </div>
                </div>

                <!-- 쿠팡 광고 영역 1 -->
                <div class="coupang-ad-wrapper card" style="text-align: center; overflow: hidden;">
                    <div style="font-size: 0.8rem; color: #666; margin-bottom: 10px;">광고</div>
                    <!-- 쿠팡 파트너스 광고 코드 -->
                    <script src="https://ads-partners.coupang.com/g.js"></script>
                    <script>
                        new PartnersCoupang.G({"id":867629,"trackingCode":"AF6959276","subId":null,"template":"carousel","width":"960","height":"180"});
                    </script>
                </div>

                <!-- 광고 2: 기사간 배너 -->
                <div style="text-align: center; margin: 30px 0;">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-5508768187151867"
                         data-ad-slot="7298546648"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <!-- 1위 추격팀 가능성 -->
                <div class="card">
                    <h2>🎯 1위 탈환 가능성</h2>
                    <div style="color: #666; font-size: 0.9rem; margin-bottom: 15px; text-align: right;">
                        📌 안내: 일부 지표는 수학적인 계산 결과입니다. 시즌이 진행되면서 현실화됩니다.
                    </div>
                    <div style="text-align: right; font-size: 0.75rem; color: #999; margin-bottom: 15px;">
                        📊 <span class="data-load-time">2025. 8. 1. 오후 11:42 KBO 공식</span>
                    </div>
                    <div id="chase-analysis">
                        <div class="table-container">
                            <table id="chase-table">
                            <thead>
                                <tr>
                                    <th>순위</th>
                                    <th>팀명</th>
                                    <th>게임차 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">1위 팀과의 승수 차이</span></span></th>
                                    <th>잔여경기 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">시즌 끝까지 남은 경기 수</span></span></th>
                                    <th>최대가능승수 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">남은 경기를 모두 이겼을 때 승수<br><br>계산법:<br>- 현재승수 + 잔여경기수</span></span></th>
                                    <th>1위팀 필요<br>조건 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">추격팀이 전승할 때 1위가 져야 할 경기수<br><br>계산법:<br>- 추격팀 최대가능승수 - 1위 현재승수</span></span></th>
                                    <th>현재 1위<br>탈환 가능 여부 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">1위 추월이 가능한지 여부 (산술적인 계산)<br><br>판단기준:<br>- 추격팀 최대가능승수 > 1위 현재승수</span></span></th>
                                    <th>역대 1위 기준<br>필요 승률 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">역대 1위 평균 84승 달성을 위해 잔여경기에서 얻어야 하는 승률<br><br>계산법:<br>- (84승 - 현재승수) ÷ 잔여경기수<br><br>🏆 잔여경기 승률 달성 난이도:<br>🟢 0.000-0.450 (매우 쉬움)<br>🟡 0.451-0.550 (쉬움)<br>🟠 0.551-0.650 (보통)<br>🔴 0.651-0.700 (어려움)<br>⚫ 0.701-1.000 (매우 어려움)<br>⚫ 1.000 초과 (불가능)</span></span></th>
                                    <th>역대 1위 성적<br>달성 가능성 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">역대 1위 평균 84승 달성이 가능한지 여부<br><br>판단기준:<br>- 현재승수 + 잔여경기수 ≥ 84승</span></span></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- 광고 3: 기사간 배너 -->
                <div style="text-align: center; margin: 30px 0;">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-5508768187151867"
                         data-ad-slot="7298546648"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <!-- 플레이오프 진출 조건 -->
                <div class="card">
                    <h2>🏟️ 플레이오프 진출 조건</h2>
                    <div style="color: #666; font-size: 0.9rem; margin-bottom: 15px; text-align: right;">
                        📌 안내: 일부 지표는 수학적인 계산 결과입니다. 시즌이 진행되면서 현실화됩니다.
                    </div>
                    <div style="text-align: right; font-size: 0.75rem; color: #999; margin-bottom: 15px;">
                        📊 <span class="data-load-time">2025. 8. 1. 오후 11:42 KBO 공식</span>
                    </div>
                    <div id="playoff-condition">
                        <div class="table-container">
                            <table id="playoff-table">
                            <thead>
                                <tr>
                                    <th class="sortable-header" data-sort="rank" onclick="sortTable('playoff', 'rank')">
                                        순위 <span class="sort-arrow">↕</span>
                                    </th>
                                    <th>팀명</th>
                                    <th class="sortable-header" data-sort="wins" onclick="sortTable('playoff', 'wins')">
                                        현재승수 <span class="sort-arrow">↕</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">정규시즌에서 현재까지 획득한 승수</span></span>
                                    </th>
                                    <th class="sortable-header" data-sort="remaining" onclick="sortTable('playoff', 'remaining')">
                                        잔여경기 <span class="sort-arrow">↕</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">시즌 끝까지 남은 경기 수</span></span>
                                    </th>
                                    <th class="sortable-header" data-sort="maxWins" onclick="sortTable('playoff', 'maxWins')">
                                        최대가능 승수 <span class="sort-arrow">↕</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">남은 경기를 모두 이겼을 때 승수<br><br>계산법:<br>- 현재승수 + 잔여경기수</span></span>
                                    </th>
                                    <th class="sortable-header" data-sort="magic" onclick="sortTable('playoff', 'magic')">
                                        PO<br>매직넘버 <span class="sort-arrow">↕</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">플레이오프 진출을 위해 필요한 승수<br><br>계산법:<br>- 72승(역대 5위 평균) - 현재승수<br><br>색상 의미:<br>🟢 확정 (이미 달성)<br>🟡 진출 유력 (10승 이하)<br>🟠 경합 (11-20승)<br>🔴 어려움 (21승 이상)</span></span>
                                    </th>
                                    <th class="sortable-header" data-sort="requiredWinPct" onclick="sortTable('playoff', 'requiredWinPct')">
                                        잔여경기<br>필요 승률 <span class="sort-arrow">↕</span> <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">플레이오프 진출을 위해 잔여경기에서 얻어야 하는 승률<br><br>계산법:<br>- PO매직넘버 ÷ 잔여경기수</span></span>
                                    </th>
                                    <th>진출상황 <span class="tooltip"><span class="help-icon">?</span><span class="tooltiptext">플레이오프 진출 가능성 평가<br><br>판단기준:<br>- 확정: 이미 72승 달성<br>- 가능: 전승시 72승 달성 가능<br>- 불가능: 전승해도 72승 미달</span></span></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                            </table>
                        </div>
                        <div class="playoff-reference" style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px; font-size: 0.85rem; color: #6c757d;">
                            <strong>📊 기준:</strong> 역대 5위 팀 평균 72승 | <strong>진출 유력:</strong> 72승+ | <strong>경합:</strong> 68-71승 | <strong>어려움:</strong> 68승 미만
                        </div>
                    </div>
                </div>

                <!-- 광고 4: 기사간 배너 -->
                <div style="text-align: center; margin: 30px 0;">
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-5508768187151867"
                         data-ad-slot="7298546648"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                         (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <!-- 팀간 승패표 -->
                <div class="card">
                    <h2>⚔️ 팀간 상대전적</h2>
                    <div style="text-align: right; font-size: 0.75rem; color: #999; margin-bottom: 15px;">
                        데이터 로딩 시간: 2025.07.31 11:30 (직접수집)
                    </div>
                    <div class="h2h-legend" style="margin-bottom: 15px; font-size: 0.9rem; color: #666; line-height: 1.4;">
                        <strong>읽는 법:</strong> 세로축 팀이 가로축 팀과의 전체전적(승-패-무) / 홈 승률 / 원정 승률 | 
                        <strong>색상:</strong> <span style="color: #16A34A; font-weight: 600;">■ 초록</span> = 상대보다 우세, <span style="color: #DC2626; font-weight: 600;">■ 빨강</span> = 상대보다 열세, <span style="color: #9CA3AF; font-weight: 600;">■ 회색</span> = 동률/자기팀
                    </div>
                    <div id="head-to-head">
                        <div class="vs-grid" id="h2h-grid">
                        </div>
                    </div>
                </div>

                <!-- 팀간 잔여 경기수 -->
                <div class="card">
                    <h2>📅 팀간 잔여 경기수</h2>
                    <div style="text-align: right; font-size: 0.75rem; color: #999; margin-bottom: 15px;">
                        데이터 로딩 시간: 2025.07.31 11:30 (직접수집)
                    </div>
                    <div class="h2h-legend" style="margin-bottom: 15px; font-size: 0.9rem; color: #666; line-height: 1.4;">
                        <strong>읽는 법:</strong> 세로축 팀이 가로축 팀과 남은 경기수 | 
                        <strong>색상:</strong> <span style="color: #22C55E; font-weight: 600;">■ 초록</span> = 7경기 이상, <span style="color: #EAB308; font-weight: 600;">■ 노랑</span> = 4-6경기, <span style="color: #F97316; font-weight: 600;">■ 주황</span> = 1-3경기, <span style="color: #9CA3AF; font-weight: 600;">■ 회색</span> = 경기 종료
                    </div>
                    <div id="remaining-games">
                        <div class="vs-grid" id="remaining-grid">
                        </div>
                    </div>
                </div>

                <!-- 쿠팡 광고 영역 2 -->
                <div class="coupang-ad-wrapper card" style="text-align: center; overflow: hidden;">
                    <div style="font-size: 0.8rem; color: #666; margin-bottom: 10px;">광고</div>
                    <!-- 쿠팡 파트너스 광고 코드 -->
                    <script src="https://ads-partners.coupang.com/g.js"></script>
                    <script>
                        new PartnersCoupang.G({"id":867629,"trackingCode":"AF6959276","subId":null,"template":"carousel","width":"960","height":"180"});
                    </script>
                </div>
            </div>
        </div>
    </div>

    <!-- 광고 5: 중간 배너 (가로형) -->
    <div style="text-align: center; margin: 40px 0;">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-5508768187151867"
             data-ad-slot="7298546648"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

                <!-- 개선 제안 카드 -->
                <div class="card">
                    <h2>💡 개선 제안을 보내주세요</h2>
                    <div style="text-align: center;">
                        <p style="font-size: 0.9rem; margin: 0 0 20px 0; color: var(--text-secondary); line-height: 1.5;">
                            더 나은 서비스를 위해 여러분의 의견이 필요합니다<br>
                            <span style="font-size: 0.8rem; opacity: 0.8;">회원가입 없이 간편하게 제출 가능합니다</span>
                        </p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSdsKAxcN6CuEf2f7WkEscHxdub20VlkaNTtis_okXUh-I4BTQ/viewform?usp=header" target="_blank" style="
                            display: inline-block;
                            color: white;
                            text-decoration: none;
                            font-size: 0.9rem;
                            padding: 12px 24px;
                            background: var(--primary-color);
                            border-radius: 8px;
                            transition: all 0.3s ease;
                            font-weight: 500;
                            box-shadow: 0 2px 8px rgba(26, 35, 126, 0.2);
                        " onmouseover="this.style.backgroundColor='var(--primary-hover)'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(26, 35, 126, 0.3)'"
                           onmouseout="this.style.backgroundColor='var(--primary-color)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(26, 35, 126, 0.2)'">
                            📝 개선 제안 설문지 작성하기
                        </a>
                    </div>
                </div>
        </div>
    </div>

    <!-- 광고 6: 푸터 상단 배너 (가로형) -->
    <div style="text-align: center; margin: 20px 0 10px 0;">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-5508768187151867"
             data-ad-slot="7298546648"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <!-- 푸터 -->
    <footer style="
        margin-top: 30px;
        padding: 40px 20px 30px;
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        text-align: center;
        border-top: 1px solid var(--border-color);
    ">
        <div style="max-width: 1200px; margin: 0 auto;">
            <div style="margin-bottom: 20px;">
                <h3 style="margin: 0 0 10px 0; font-size: 1.2rem; font-weight: 600;">⚾ KBO 매직넘버 계산기</h3>
                <p style="margin: 0 0 15px 0; font-size: 0.9rem; opacity: 0.9;">2025 KBO 리그 매직넘버 계산기<br>플레이오프 진출 조건, 우승 가능성, 팀별 순위표와 상대전적을 한눈에 확인하세요</p>
                
                <div style="text-align: center; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 15px;">
                    <a href="https://www.koreabaseball.com/" target="_blank" style="
                        color: rgba(255,255,255,0.9);
                        text-decoration: none;
                        font-size: 0.85rem;
                        padding: 8px 16px;
                        border: 1px solid rgba(255,255,255,0.3);
                        border-radius: 20px;
                        transition: all 0.3s ease;
                        display: inline-block;
                        white-space: nowrap;
                    " onmouseover="this.style.backgroundColor='rgba(255,255,255,0.1)'; this.style.borderColor='rgba(255,255,255,0.5)'" 
                       onmouseout="this.style.backgroundColor='transparent'; this.style.borderColor='rgba(255,255,255,0.3)'">
                        📺 KBO 공홈
                    </a>
                    <a href="https://www.koreabaseball.com/Schedule/Schedule.aspx" target="_blank" style="
                        color: rgba(255,255,255,0.9);
                        text-decoration: none;
                        font-size: 0.85rem;
                        padding: 8px 16px;
                        border: 1px solid rgba(255,255,255,0.3);
                        border-radius: 20px;
                        transition: all 0.3s ease;
                        display: inline-block;
                        white-space: nowrap;
                    " onmouseover="this.style.backgroundColor='rgba(255,255,255,0.1)'; this.style.borderColor='rgba(255,255,255,0.5)'" 
                       onmouseout="this.style.backgroundColor='transparent'; this.style.borderColor='rgba(255,255,255,0.3)'">
                        📅 일정
                    </a>
                    <a href="https://www.koreabaseball.com/Record/TeamRank/TeamRankDaily.aspx" target="_blank" style="
                        color: rgba(255,255,255,0.9);
                        text-decoration: none;
                        font-size: 0.85rem;
                        padding: 8px 16px;
                        border: 1px solid rgba(255,255,255,0.3);
                        border-radius: 20px;
                        transition: all 0.3s ease;
                        display: inline-block;
                        white-space: nowrap;
                    " onmouseover="this.style.backgroundColor='rgba(255,255,255,0.1)'; this.style.borderColor='rgba(255,255,255,0.5)'" 
                       onmouseout="this.style.backgroundColor='transparent'; this.style.borderColor='rgba(255,255,255,0.3)'">
                        📊 순위표
                    </a>
                </div>
                
                <!-- PC 버전 보기 기능 (모바일에서만 표시) -->
                <div id="mobile-controls" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 0.85rem; display: none;">
                    <button id="toggle-desktop-view" style="
                        background: rgba(255,255,255,0.1);
                        color: rgba(255,255,255,0.9);
                        border: 1px solid rgba(255,255,255,0.2);
                        padding: 8px 12px;
                        border-radius: 6px;
                        font-size: 0.75rem;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        margin-right: 10px;
                    ">
                        🖥️ PC 버전으로 보기
                    </button>
                    <span style="opacity: 0.6; font-size: 0.7rem;">더 원활한 사용이 가능합니다</span>
                </div>
            </div>
            
            <div style="border-top: 1px solid rgba(255,255,255,0.2); padding-top: 20px; font-size: 0.8rem; opacity: 0.8;">
                <p style="margin: 0 0 10px 0;">
                    © 2025 <a href="https://kbo.mahalohana-bruce.com/magic-number/" style="color: rgba(255,255,255,0.9); text-decoration: none; font-weight: 500;">KBO 매직넘버 계산기</a>
                </p>
                <p style="margin: 0; font-size: 0.75rem; opacity: 0.7;">
                    KBO 공식 데이터 기반 | 📅 매일 오후 11시 30분 자동 업데이트
                </p>
                
            </div>
        </div>
    </footer>

    <script>
        // KBO 팀 데이터 (2025 시즌 기준)
        const kboTeams = {
            "한화": { fullName: "한화 이글스", color: "#FF6600", logo: "🦅" },
            "LG": { fullName: "LG 트윈스", color: "#C50E2E", logo: "⚾" },
            "두산": { fullName: "두산 베어스", color: "#131230", logo: "🐻" },
            "삼성": { fullName: "삼성 라이온즈", color: "#1F4E8C", logo: "🦁" },
            "KIA": { fullName: "KIA 타이거즈", color: "#EA0029", logo: "🐅" },
            "SSG": { fullName: "SSG 랜더스", color: "#CE0E2D", logo: "🏟️" },
            "롯데": { fullName: "롯데 자이언츠", color: "#041E42", logo: "⚡" },
            "NC": { fullName: "NC 다이노스", color: "#315288", logo: "🦕" },
            "키움": { fullName: "키움 히어로즈", color: "#570514", logo: "🦸" },
            "KT": { fullName: "KT 위즈", color: "#000000", logo: "🧙" }
        };

        // KBO 순위 데이터 (동적 로딩)
        let currentStandings = [];
        
        // 메모리 관리를 위한 이벤트 리스너 관리자
        class EventManager {
            constructor() {
                this.listeners = new Map();
                this.boundCleanup = this.cleanup.bind(this);
                
                // 페이지 언로드 시 정리
                window.addEventListener('beforeunload', this.boundCleanup);
                window.addEventListener('pagehide', this.boundCleanup);
            }
            
            add(element, event, handler, options = {}) {
                const key = `${element.constructor.name}_${event}_${Date.now()}`;
                element.addEventListener(event, handler, options);
                
                this.listeners.set(key, {
                    element,
                    event,
                    handler,
                    options
                });
                
                return key; // 나중에 개별 제거할 때 사용
            }
            
            remove(key) {
                if (this.listeners.has(key)) {
                    const { element, event, handler } = this.listeners.get(key);
                    element.removeEventListener(event, handler);
                    this.listeners.delete(key);
                }
            }
            
            cleanup() {
                console.log(`🧹 메모리 정리: ${this.listeners.size}개 이벤트 리스너 제거`);
                this.listeners.forEach(({ element, event, handler }) => {
                    try {
                        element.removeEventListener(event, handler);
                    } catch (e) {
                        console.warn('이벤트 리스너 제거 실패:', e);
                    }
                });
                this.listeners.clear();
                
            }
        }
        
        // 전역 이벤트 관리자 인스턴스
        const eventManager = new EventManager();
        
        // 공통 유틸리티 함수들
        const Utils = {
            // 팀명과 로고를 조합한 HTML 생성
            getTeamNameWithLogo(team, includeRank = false) {
                const teamData = kboTeams[team.team || team];
                if (!teamData) return team.team || team;
                
                const teamName = team.team || team;
                const logoAndName = `${teamData.logo} <span style="color: ${teamData.color}; font-weight: 600;">${teamName}</span>`;
                
                if (includeRank && team.rank) {
                    return `${logoAndName} <span style="color: #666; font-size: 0.9rem;">(${team.rank}위)</span>`;
                }
                
                return logoAndName;
            },
            
            // 홈/어웨이 기록 표시 HTML 생성
            getHomeAwayDisplay(teamName) {
                const homeAwayRecords = {
                    "한화": { home: "30-16-2", away: "28-21-1" },
                    "LG": { home: "31-19-0", away: "26-21-2" },
                    "롯데": { home: "28-21-2", away: "26-22-1" },
                    "KT": { home: "26-23-1", away: "24-24-2" },
                    "SSG": { home: "24-22-2", away: "23-24-2" },
                    "삼성": { home: "27-22-0", away: "21-26-1" },
                    "KIA": { home: "26-20-3", away: "20-27-1" },
                    "NC": { home: "24-21-2", away: "20-24-3" },
                    "두산": { home: "21-25-3", away: "20-27-2" },
                    "키움": { home: "16-32-2", away: "12-36-2" }
                };
                
                const teamHomeAway = homeAwayRecords[teamName] || { home: "0-0-0", away: "0-0-0" };
                
                // 홈/방문 승률 계산
                const parseRecord = (record) => {
                    const [wins, losses, draws] = record.split('-').map(Number);
                    const totalGames = wins + losses;
                    const winRate = totalGames > 0 ? (wins / totalGames) : 0;
                    return { wins, losses, draws, winRate };
                };
                
                const homeStats = parseRecord(teamHomeAway.home);
                const awayStats = parseRecord(teamHomeAway.away);
                
                return `
                    <div style="
                        font-size: 0.9rem; 
                        line-height: 1.4;
                        text-align: center;
                        color: #555;
                    ">
                        <div style="margin-bottom: 3px; font-weight: 600;">
                            ${teamHomeAway.home} / ${teamHomeAway.away}
                        </div>
                        <div style="font-size: 0.85rem; color: #666;">
                            🏠 ${homeStats.winRate.toFixed(3)} / ✈️ ${awayStats.winRate.toFixed(3)}
                        </div>
                    </div>
                `;
            },
            
            // 매직넘버 표시 HTML 생성
            getMagicNumberDisplay(team) {
                const magicNumbers = currentStandings.length > 0 ? 
                    (JSON.parse(localStorage.getItem('kbo-magic-numbers')) || {}) : {};
                
                let magicNumber = 0;
                if (team.rank === 1) {
                    // 1위팀: 우승 매직넘버
                    const firstPlaceMagic = magicNumbers[team.team];
                    magicNumber = firstPlaceMagic ? firstPlaceMagic.championship : 0;
                } else {
                    // 나머지 팀: PO 진출 매직넘버 (72승 기준)
                    magicNumber = Math.max(0, 72 - team.wins);
                }
                
                if (magicNumber === 0) {
                    return team.rank === 1 ? 
                        '<span style="color: #FFD700; font-weight: 700;">우승확정</span>' :
                        '<span style="color: #4CAF50; font-weight: 700;">PO확정</span>';
                }
                
                // 매직넘버 색상 결정
                let color = '#666';
                if (magicNumber <= 3) color = '#4CAF50';      // 초록
                else if (magicNumber <= 10) color = '#FF9800'; // 주황
                else if (magicNumber <= 20) color = '#FF5722'; // 빨강
                else color = '#9E9E9E';                        // 회색
                
                return `<span style="color: ${color}; font-weight: 600;">${magicNumber}</span>`;
            },
            
            // 테이블 행 HTML 생성 (공통 스타일 적용)
            createTableRow(cells, teamColor = null, additionalClasses = '') {
                const row = document.createElement('tr');
                if (teamColor) {
                    row.style.borderLeft = `4px solid ${teamColor}`;
                }
                if (additionalClasses) {
                    row.className = additionalClasses;
                }
                
                row.innerHTML = cells.map(cell => `<td>${cell}</td>`).join('');
                return row;
            }
        };
        
        // 에러 처리 및 사용자 알림 함수들
        function showNotification(message, type = 'error', duration = 5000) {
            // 기존 알림 제거
            const existingNotification = document.querySelector('.error-notification');
            if (existingNotification) {
                existingNotification.remove();
            }
            
            const notification = document.createElement('div');
            notification.className = `error-notification ${type}`;
            notification.innerHTML = `
                <button class="close-btn" onclick="this.parentElement.remove()">&times;</button>
                <strong>${type === 'error' ? '⚠️ 오류' : '✅ 알림'}</strong><br>
                ${message}
            `;
            
            document.body.appendChild(notification);
            
            // 자동 제거
            if (duration > 0) {
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, duration);
            }
        }
        
        function handleError(error, context = '알 수 없는 오류') {
            console.error(`❌ ${context}:`, error);
            
            let userMessage = '';
            if (error.name === 'TypeError' && error.message.includes('fetch')) {
                userMessage = '네트워크 연결을 확인해주세요. 잠시 후 다시 시도합니다.';
            } else if (error.name === 'SyntaxError') {
                userMessage = '데이터 형식에 문제가 있습니다. 백업 데이터를 사용합니다.';
            } else {
                userMessage = `${context} 발생. 백업 데이터를 사용하여 서비스를 계속 제공합니다.`;
            }
            
            showNotification(userMessage, 'error', 8000);
        }
        
        // 데이터 정보 업데이트 함수
        function updateLoadingTime(data) {
            try {
                // 현재 시간 (데이터 로딩 시간)
                const now = new Date();
                const loadDate = now.toLocaleDateString('ko-KR');
                const loadTime = now.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
                
                // 표시 텍스트 구성
                const displayText = `${loadDate} ${loadTime} KBO 공식`;
                
                // 모든 데이터 정보 표시 업데이트
                const loadTimeElements = document.querySelectorAll('.data-load-time');
                loadTimeElements.forEach(element => {
                    if (element) {
                        element.textContent = displayText;
                    }
                });
                
                console.log('📊 데이터 로딩 시간 업데이트:', displayText);
            } catch (error) {
                console.error('❌ 데이터 로딩 시간 업데이트 실패:', error);
            }
        }

        // 데이터 로딩 함수
        async function loadKBOData() {
            try {
                console.log('🔍 KBO 데이터 로딩 시작...');
                const response = await fetch(`kbo-rankings.json?v=${Date.now()}`);
                console.log('📡 응답 상태:', response.status, response.statusText);
                if (response.ok) {
                    const data = await response.json();
                    console.log('📊 로드된 데이터:', data);
                    // 최신 최근 10경기와 연속 기록 데이터 (8월 1일 기준 - 최신 상대전적 반영)
                    const actualRecords = {
                        "한화": { recent10: "5승1무4패", streak: "2승" },
                        "LG": { recent10: "9승0무1패", streak: "3승" },
                        "롯데": { recent10: "7승0무3패", streak: "1승" },
                        "KT": { recent10: "5승0무5패", streak: "3패" },
                        "SSG": { recent10: "5승1무4패", streak: "4승" },
                        "삼성": { recent10: "5승0무5패", streak: "2패" },
                        "KIA": { recent10: "2승1무7패", streak: "1승" },
                        "NC": { recent10: "4승0무6패", streak: "1패" },
                        "두산": { recent10: "4승2무4패", streak: "1패" },
                        "키움": { recent10: "1승1무8패", streak: "7패" }
                    };
                    
                    // JSON 데이터 구조를 JavaScript 코드가 기대하는 형태로 변환
                    currentStandings = (data.rankings || []).map(team => ({
                        ...team,
                        winPct: team.winRate || team.winPct || 0, // winRate를 winPct로 변환
                        recent10: actualRecords[team.team]?.recent10 || team.recent10 || "5승 0무 5패",
                        streak: actualRecords[team.team]?.streak || team.streak || "1승",
                        homeAway: { home: "0-0-0", away: "0-0-0" } // 홈/방문 기본값 추가
                    }));
                    console.log('✅ KBO 데이터 로딩 완료:', currentStandings.length + '팀');
                    
                    // 데이터 로딩 시간 업데이트
                    updateLoadingTime(data);
                    
                    showNotification(`최신 KBO 데이터 로딩 완료 (${currentStandings.length}개 팀)`, 'success', 3000);
                    return data;
                } else {
                    console.error('❌ 응답 실패:', response.status, response.statusText);
                    throw new Error(`데이터 로딩 실패: ${response.status} ${response.statusText}`);
                }
            } catch (error) {
                console.error('❌ loadKBOData 에러 상세:', error);
                handleError(error, 'KBO 데이터 로딩 실패');
                // 백업 데이터 사용
                currentStandings = [
                    { rank: 1, team: "한화", games: 99, wins: 59, losses: 37, draws: 3, winPct: 0.615, gamesBehind: 0, recent10: "5승1무4패", streak: "2승", homeAway: { home: "0-0-0", away: "0-0-0" } },
                    { rank: 2, team: "LG", games: 100, wins: 58, losses: 40, draws: 2, winPct: 0.592, gamesBehind: 2, recent10: "9승0무1패", streak: "3승", homeAway: { home: "0-0-0", away: "0-0-0" } },
                    { rank: 3, team: "롯데", games: 101, wins: 55, losses: 43, draws: 3, winPct: 0.561, gamesBehind: 5, recent10: "7승0무3패", streak: "1승", homeAway: { home: "0-0-0", away: "0-0-0" } },
                    { rank: 4, team: "SSG", games: 98, wins: 48, losses: 46, draws: 4, winPct: 0.511, gamesBehind: 10, recent10: "5승1무4패", streak: "4승", homeAway: { home: "0-0-0", away: "0-0-0" } },
                    { rank: 5, team: "KT", games: 101, wins: 50, losses: 48, draws: 3, winPct: 0.510, gamesBehind: 10, recent10: "5승0무5패", streak: "3패", homeAway: { home: "0-0-0", away: "0-0-0" } },
                    { rank: 6, team: "KIA", games: 98, wins: 47, losses: 47, draws: 4, winPct: 0.500, gamesBehind: 11, recent10: "2승1무7패", streak: "1승", homeAway: { home: "0-0-0", away: "0-0-0" } },
                    { rank: 7, team: "삼성", games: 98, wins: 48, losses: 49, draws: 1, winPct: 0.495, gamesBehind: 11.5, recent10: "5승0무5패", streak: "2패", homeAway: { home: "0-0-0", away: "0-0-0" } },
                    { rank: 8, team: "NC", games: 95, wins: 44, losses: 46, draws: 5, winPct: 0.489, gamesBehind: 12, recent10: "4승0무6패", streak: "1패", homeAway: { home: "0-0-0", away: "0-0-0" } },
                    { rank: 9, team: "두산", games: 99, wins: 41, losses: 53, draws: 5, winPct: 0.436, gamesBehind: 17, recent10: "4승2무4패", streak: "1패", homeAway: { home: "0-0-0", away: "0-0-0" } },
                    { rank: 10, team: "키움", games: 101, wins: 28, losses: 69, draws: 4, winPct: 0.289, gamesBehind: 31.5, recent10: "1승1무8패", streak: "7패", homeAway: { home: "0-0-0", away: "0-0-0" } }
                ];
                console.log('📊 백업 데이터 사용:', currentStandings.length + '팀');
                // 백업 데이터도 JSON 형식으로 반환
                const backupData = {
                    rankings: currentStandings,
                    magicNumbers: {},
                    lastUpdated: new Date().toISOString(),
                    updateDate: new Date().toLocaleDateString('ko-KR')
                };
                
                // 백업 데이터 사용시에도 로딩 시간 업데이트
                updateLoadingTime(backupData);
                
                return backupData;
            }
        }

        // 2025년 7월 29일 기준 실제 팀간 상대전적 데이터
        const headToHeadData = {
            "한화": { "LG": "4-5-1", "롯데": "4-6-0", "KT": "8-3-0", "KIA": "8-3-0", "삼성": "6-4-0", "SSG": "6-6-0", "NC": "7-4-1", "두산": "6-5-1", "키움": "10-1-0" },
            "LG": { "한화": "5-4-1", "롯데": "6-4-1", "KT": "5-4-0", "KIA": "7-4-0", "삼성": "6-6-0", "SSG": "8-4-0", "NC": "6-5-0", "두산": "6-5-0", "키움": "9-4-0" },
            "롯데": { "한화": "6-4-0", "LG": "4-6-1", "KT": "6-4-2", "KIA": "6-6-0", "삼성": "7-3-0", "SSG": "5-6-0", "NC": "4-4-0", "두산": "6-6-0", "키움": "10-4-0" },
            "KT": { "한화": "3-8-0", "LG": "4-5-0", "롯데": "4-6-2", "KIA": "5-7-0", "삼성": "7-3-0", "SSG": "5-6-0", "NC": "6-5-0", "두산": "7-5-1", "키움": "9-3-0" },
            "KIA": { "한화": "3-8-0", "LG": "4-7-0", "롯데": "6-6-0", "KT": "7-5-0", "삼성": "3-7-0", "SSG": "5-4-1", "NC": "5-3-0", "두산": "7-2-0", "키움": "6-5-3" },
            "삼성": { "한화": "4-6-0", "LG": "6-6-0", "롯데": "3-7-0", "KT": "3-7-0", "KIA": "7-3-0", "SSG": "6-5-1", "NC": "6-6-0", "두산": "7-6-0", "키움": "6-3-0" },
            "SSG": { "한화": "6-6-0", "LG": "4-8-0", "롯데": "6-5-0", "KT": "6-5-0", "KIA": "4-5-1", "삼성": "5-6-1", "NC": "7-2-2", "두산": "5-4-1", "키움": "4-5-0" },
            "NC": { "한화": "4-7-1", "LG": "5-6-0", "롯데": "4-4-0", "KT": "5-6-0", "KIA": "3-5-0", "삼성": "6-6-0", "SSG": "2-7-2", "두산": "5-3-2", "키움": "10-2-1" },
            "두산": { "한화": "5-6-1", "LG": "5-6-0", "롯데": "6-6-0", "KT": "5-7-1", "KIA": "2-7-0", "삼성": "6-7-0", "SSG": "4-5-1", "NC": "3-5-2", "키움": "5-3-3" },
            "키움": { "한화": "1-10-0", "LG": "4-9-0", "롯데": "4-10-0", "KT": "3-9-0", "KIA": "5-6-3", "삼성": "3-6-0", "SSG": "5-4-0", "NC": "2-10-1", "두산": "3-5-3" }
        };


        // 요약 대시보드 업데이트
        function updateSummaryDashboard() {
            const firstPlace = currentStandings[0];
            const secondPlace = currentStandings[1];
            
            // 1위 팀 정보
            const firstTeamData = kboTeams[firstPlace.team];
            document.getElementById('first-place-team').innerHTML = `${firstTeamData.logo} <span style="color: ${firstTeamData.color}; font-weight: 600;">${firstPlace.team}</span>`;
            const magicNumber = calculateMagicNumber(firstPlace, secondPlace);
            document.getElementById('first-place-magic').textContent = `매직넘버: ${magicNumber > 0 ? magicNumber : '확정'}`;

            // 플레이오프 확정 팀 수 (72승 이상)
            const confirmedTeams = currentStandings.filter(team => team.wins >= 72).length;
            document.getElementById('playoff-confirmed-teams').textContent = `${confirmedTeams}개 팀`;
            
            // 플레이오프 확정 팀이 있으면 첫 번째 확정 팀 정보 표시
            if (confirmedTeams > 0) {
                const firstConfirmedTeam = currentStandings.find(team => team.wins >= 72);
                if (firstConfirmedTeam) {
                    const teamData = kboTeams[firstConfirmedTeam.team];
                    document.getElementById('playoff-confirmed-desc').innerHTML = `<span style="color: ${teamData.color}; font-weight: 600;">${firstConfirmedTeam.team}</span> 외 ${confirmedTeams - 1}팀`;
                }
            } else {
                document.getElementById('playoff-confirmed-desc').textContent = '72승 이상 달성';
            }

            // 최고 연승팀
            let bestStreak = { team: '', count: 0, type: '' };
            currentStandings.forEach(team => {
                if (team.streak.includes('승')) {
                    const count = parseInt(team.streak);
                    if (count > bestStreak.count) {
                        bestStreak = { team: team.team, count: count, type: '승' };
                    }
                }
            });
            if (bestStreak.team) {
                const bestTeamData = kboTeams[bestStreak.team];
                document.getElementById('best-streak-team').innerHTML = `${bestTeamData.logo} <span style="color: ${bestTeamData.color}; font-weight: 600;">${bestStreak.team}</span>`;
                document.getElementById('best-streak-count').textContent = `${bestStreak.count}연승 중`;
            } else {
                document.getElementById('best-streak-team').textContent = '없음';
                document.getElementById('best-streak-count').textContent = '-';
            }

            // 최근 10경기 성적이 가장 좋은 팀 찾기
            let bestRecentTeam = null;
            let bestRecentWins = -1;
            
            currentStandings.forEach(team => {
                if (team.recent10) {
                    // "8승 0무 2패" 형태에서 승수 추출
                    const winsMatch = team.recent10.match(/(\d+)승/);
                    if (winsMatch) {
                        const wins = parseInt(winsMatch[1]);
                        if (wins > bestRecentWins) {
                            bestRecentWins = wins;
                            bestRecentTeam = team;
                        }
                    }
                }
            });
            
            if (bestRecentTeam && bestRecentWins >= 0) {
                const teamData = kboTeams[bestRecentTeam.team];
                document.getElementById('recent-best-team').innerHTML = `${teamData.logo} <span style="color: ${teamData.color}; font-weight: 600;">${bestRecentTeam.team}</span>`;
                document.getElementById('recent-best-record').textContent = bestRecentTeam.recent10;
            } else {
                document.getElementById('recent-best-team').textContent = '-';
                document.getElementById('recent-best-record').textContent = '-';
            }
        }

        // 테이블 정렬 상태
        let sortState = {
            standings: { column: '', direction: '' },
            playoff: { column: '', direction: '' }
        };

        // 테이블 정렬 함수
        function sortTable(tableType, column) {
            const currentSort = sortState[tableType];
            
            // 정렬 방향 결정
            let direction = 'asc';
            if (currentSort.column === column) {
                direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            }
            
            // 이전 헤더의 정렬 표시 제거
            document.querySelectorAll(`#${tableType}-table .sortable-header`).forEach(header => {
                header.classList.remove('sort-asc', 'sort-desc');
                const arrow = header.querySelector('.sort-arrow');
                if (arrow) arrow.textContent = '↕';
            });
            
            // 현재 헤더에 정렬 표시 추가
            const currentHeader = document.querySelector(`#${tableType}-table .sortable-header[data-sort="${column}"]`);
            if (currentHeader) {
                currentHeader.classList.add(direction === 'asc' ? 'sort-asc' : 'sort-desc');
                const arrow = currentHeader.querySelector('.sort-arrow');
                if (arrow) arrow.textContent = direction === 'asc' ? '↑' : '↓';
            }
            
            // 정렬 상태 업데이트
            sortState[tableType] = { column, direction };
            
            // 테이블 정렬 실행
            if (tableType === 'standings') {
                sortStandingsTable(column, direction);
            } else if (tableType === 'playoff') {
                sortPlayoffTable(column, direction);
            }
        }

        // 순위표 정렬
        function sortStandingsTable(column, direction) {
            const table = document.getElementById('standings-table');
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));
            
            // 테이블에 정렬 중 표시
            table.classList.add('sorting');
            
            rows.sort((a, b) => {
                let aValue, bValue;
                
                switch(column) {
                    case 'rank':
                        aValue = parseInt(a.cells[0].textContent);
                        bValue = parseInt(b.cells[0].textContent);
                        break;
                    case 'games':
                        aValue = parseInt(a.cells[2].textContent);
                        bValue = parseInt(b.cells[2].textContent);
                        break;
                    case 'wins':
                        aValue = parseInt(a.cells[3].textContent);
                        bValue = parseInt(b.cells[3].textContent);
                        break;
                    case 'losses':
                        aValue = parseInt(a.cells[4].textContent);
                        bValue = parseInt(b.cells[4].textContent);
                        break;
                    case 'draws':
                        aValue = parseInt(a.cells[5].textContent);
                        bValue = parseInt(b.cells[5].textContent);
                        break;
                    case 'winPct':
                        aValue = parseFloat(a.cells[6].textContent);
                        bValue = parseFloat(b.cells[6].textContent);
                        break;
                    case 'gamesBehind':
                        aValue = a.cells[8].textContent === '-' ? 0 : parseFloat(a.cells[8].textContent);
                        bValue = b.cells[8].textContent === '-' ? 0 : parseFloat(b.cells[8].textContent);
                        break;
                    case 'recent10':
                        aValue = parseInt(a.cells[10].textContent.split('승')[0]);
                        bValue = parseInt(b.cells[10].textContent.split('승')[0]);
                        break;
                    case 'streak':
                        const aStreak = a.cells[11].textContent;
                        const bStreak = b.cells[11].textContent;
                        aValue = aStreak.includes('승') ? parseInt(aStreak) : -parseInt(aStreak);
                        bValue = bStreak.includes('승') ? parseInt(bStreak) : -parseInt(bStreak);
                        break;
                    case 'magic':
                        const aMagic = a.cells[12].textContent;
                        const bMagic = b.cells[12].textContent;
                        aValue = getMagicNumberSortValue(aMagic);
                        bValue = getMagicNumberSortValue(bMagic);
                        break;
                    default:
                        return 0;
                }
                
                if (direction === 'asc') {
                    return aValue > bValue ? 1 : aValue < bValue ? -1 : 0;
                } else {
                    return aValue < bValue ? 1 : aValue > bValue ? -1 : 0;
                }
            });
            
            // 정렬된 행들을 다시 추가
            tbody.innerHTML = '';
            rows.forEach((row, index) => {
                row.style.animationDelay = `${index * 0.05}s`;
                tbody.appendChild(row);
            });
            
            // 정렬 완료 후 표시 제거
            setTimeout(() => {
                table.classList.remove('sorting');
            }, 300);
        }

        // 플레이오프 테이블 정렬
        function sortPlayoffTable(column, direction) {
            const table = document.getElementById('playoff-table');
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));
            
            table.classList.add('sorting');
            
            rows.sort((a, b) => {
                let aValue, bValue;
                
                switch(column) {
                    case 'rank':
                        aValue = parseInt(a.cells[0].textContent);
                        bValue = parseInt(b.cells[0].textContent);
                        break;
                    case 'wins':
                        aValue = parseInt(a.cells[2].textContent);
                        bValue = parseInt(b.cells[2].textContent);
                        break;
                    case 'remaining':
                        aValue = parseInt(a.cells[3].textContent);
                        bValue = parseInt(b.cells[3].textContent);
                        break;
                    case 'maxWins':
                        aValue = parseInt(a.cells[4].textContent);
                        bValue = parseInt(b.cells[4].textContent);
                        break;
                    case 'magic':
                        const aMagic = a.cells[5].textContent;
                        const bMagic = b.cells[5].textContent;
                        aValue = getMagicNumberSortValue(aMagic);
                        bValue = getMagicNumberSortValue(bMagic);
                        break;
                    case 'requiredWinPct':
                        const aReq = a.cells[6].textContent;
                        const bReq = b.cells[6].textContent;
                        aValue = aReq === '-' || aReq === '달성' ? -1 : parseFloat(aReq);
                        bValue = bReq === '-' || bReq === '달성' ? -1 : parseFloat(bReq);
                        break;
                    default:
                        return 0;
                }
                
                if (direction === 'asc') {
                    return aValue > bValue ? 1 : aValue < bValue ? -1 : 0;
                } else {
                    return aValue < bValue ? 1 : aValue > bValue ? -1 : 0;
                }
            });
            
            tbody.innerHTML = '';
            rows.forEach((row, index) => {
                row.style.animationDelay = `${index * 0.05}s`;
                tbody.appendChild(row);
            });
            
            setTimeout(() => {
                table.classList.remove('sorting');
            }, 300);
        }

        // 매직넘버 정렬 값 변환
        function getMagicNumberSortValue(magic) {
            if (magic === '확정' || magic === 'PO확정') return -1;
            if (magic === '불가능') return 9999;
            return parseInt(magic) || 0;
        }

        function renderStandingsTable() {
            try {
                console.log('📊 renderStandingsTable 시작');
                console.log('currentStandings:', currentStandings);
                
                const tbody = document.querySelector('#standings-table tbody');
                console.log('tbody 요소:', tbody);
                
                if (!tbody) {
                    throw new Error('순위표 테이블을 찾을 수 없습니다');
                }
                tbody.innerHTML = '';

                if (!currentStandings || currentStandings.length === 0) {
                    throw new Error('순위 데이터가 없습니다');
                }

                // 모든 추격팀의 최대가능승수 중 최고값 찾기
                const maxPossibleWinsByChaser = Math.max(...currentStandings.slice(1).map(team => 
                    team.wins + (144 - team.games)
                ));

                currentStandings.forEach(team => {
                const row = document.createElement('tr');
                const totalGames = 144;
                const remainingGames = totalGames - team.games;
                const teamData = kboTeams[team.team];
                
                // 데이터 검증
                if (!teamData) {
                    console.error('❌ 팀 데이터 없음:', team.team);
                    showNotification(`${team.team} 팀 데이터를 찾을 수 없습니다.`, 'error', 3000);
                    return;
                }
                
                let rankClass = '';
                if (team.rank === 1) rankClass = 'rank-1';
                else if (team.rank === 2) rankClass = 'rank-2';
                else if (team.rank === 3) rankClass = 'rank-3';
                else if (team.rank >= 4 && team.rank <= 5) rankClass = 'playoff';
                
                row.className = rankClass;
                row.style.borderLeft = `4px solid ${teamData.color}`;

                // 매직넘버 계산
                let magicNumberDisplay = '-';
                if (team.rank === 1) {
                    const magicNumber = Math.max(0, maxPossibleWinsByChaser + 1 - team.wins);
                    magicNumberDisplay = magicNumber > 0 ? magicNumber : '확정';
                } else {
                    const playoffBaseline = 72;
                    const playoffMagicNumber = Math.max(0, playoffBaseline - team.wins);
                    if (playoffMagicNumber === 0) {
                        magicNumberDisplay = 'PO확정';
                    } else if (team.wins + (144 - team.games) >= playoffBaseline) {
                        magicNumberDisplay = playoffMagicNumber;
                    } else {
                        magicNumberDisplay = '불가능';
                    }
                }

                // 연속 기록 강조
                const streakFormatted = formatStreak(team.streak);
                
                // 최근 10경기 강조
                const recent10Formatted = formatRecent10(team.recent10);
                
                // 팀명 로고 추가
                const teamNameWithLogo = Utils.getTeamNameWithLogo(team);

                // 홈/방문 성적 실제 데이터 (KBO 공식 사이트 기준)
                const homeAwayRecords = {
                    "한화": { home: "30-16-2", away: "28-21-1" },
                    "LG": { home: "31-19-0", away: "26-21-2" },
                    "롯데": { home: "28-21-2", away: "26-22-1" },
                    "KT": { home: "26-23-1", away: "24-24-2" },
                    "SSG": { home: "24-22-2", away: "23-24-2" },
                    "삼성": { home: "27-22-0", away: "21-26-1" },
                    "KIA": { home: "26-20-3", away: "20-27-1" },
                    "NC": { home: "24-21-2", away: "20-24-3" },
                    "두산": { home: "21-25-3", away: "20-27-2" },
                    "키움": { home: "16-32-2", away: "12-36-2" }
                };
                
                const teamHomeAway = homeAwayRecords[team.team] || { home: "0-0-0", away: "0-0-0" };
                const homeAwayDisplay = `<div style="line-height: 1.4; font-size: 0.95rem;"><span style="color: #2563eb; font-weight: 500;">🏠 ${teamHomeAway.home}</span><br><span style="color: #dc2626; font-weight: 500;">✈️ ${teamHomeAway.away}</span></div>`;

                row.innerHTML = `
                    <td style="color: ${teamData.color}; font-weight: 700;">${team.rank}</td>
                    <td>${teamNameWithLogo}</td>
                    <td>${team.games}</td>
                    <td>${team.wins}</td>
                    <td>${team.losses}</td>
                    <td>${team.draws}</td>
                    <td>${team.winPct.toFixed(3)}</td>
                    <td>${homeAwayDisplay}</td>
                    <td>${team.gamesBehind === 0 ? '-' : team.gamesBehind}</td>
                    <td>${remainingGames}</td>
                    <td>${recent10Formatted}</td>
                    <td>${streakFormatted}</td>
                    <td>${magicNumberDisplay}</td>
                `;

                tbody.appendChild(row);
            });
            } catch (error) {
                handleError(error, '순위표 렌더링 실패');
                // 에러가 발생하면 기본 메시지 표시
                const tbody = document.querySelector('#standings-table tbody');
                if (tbody) {
                    tbody.innerHTML = '<tr><td colspan="12" style="text-align: center; color: #999; padding: 20px;">데이터를 불러오는 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.</td></tr>';
                }
            }
        }

        function formatStreak(streak) {
            if (streak.includes('승')) {
                const winCount = parseInt(streak);
                if (winCount >= 3) {
                    return `<span style="color: var(--success-color); font-weight: 700;">${streak}</span>`;
                }
                return `<span style="color: var(--success-color); font-weight: 600;">${streak}</span>`;
            } else if (streak.includes('패')) {
                const lossCount = parseInt(streak);
                if (lossCount >= 3) {
                    return `<span style="color: var(--danger-color); font-weight: 700;">${streak}</span>`;
                }
                return `<span style="color: var(--danger-color); font-weight: 600;">${streak}</span>`;
            }
            return streak;
        }

        function formatRecent10(recent10) {
            // "6승1무3패" 형태 파싱
            const winMatch = recent10.match(/(\d+)승/);
            const lossMatch = recent10.match(/(\d+)패/);
            
            const wins = winMatch ? parseInt(winMatch[1]) : 0;
            const losses = lossMatch ? parseInt(lossMatch[1]) : 0;
            
            // 색상 기준: 7승 이상(녹색), 5-6승(노란색), 4승 이하(빨간색)
            if (wins >= 7) {
                // 7승 이상 - 뜨거운 상승세
                return `<span style="color: var(--success-color); font-weight: 700;">${recent10}</span>`;
            } else if (wins >= 5) {
                // 5-6승 - 양호한 흐름
                return `<span style="color: var(--warning-color); font-weight: 600;">${recent10}</span>`;
            } else {
                // 4승 이하 - 부진한 흐름
                return `<span style="color: var(--danger-color); font-weight: 600;">${recent10}</span>`;
            }
        }

        function getStatusIndicator(team) {
            if (team.rank === 1 && team.magicNumber <= 10) {
                return '<span class="status-indicator clinched">우승권</span>';
            } else if (team.rank <= 5) {
                return '<span class="status-indicator contending">PO권</span>';
            }
            return '';
        }

        function calculateMagicNumber(firstPlace, secondPlace) {
            const totalGames = 144; // KBO 정규시즌 총 경기수
            // 2위팀의 최대가능승수
            const secondPlaceMaxWins = secondPlace.wins + (totalGames - secondPlace.games);
            // 매직넘버 = 2위팀 최대가능승수 + 1 - 1위팀 현재승수
            const magicNumber = secondPlaceMaxWins + 1 - firstPlace.wins;
            return Math.max(0, magicNumber);
        }


        function renderChampionshipCondition() {
            console.log('🏆 우승 조건 렌더링 시작');
            console.log('현재 순위 데이터:', currentStandings);
            
            if (!currentStandings || currentStandings.length === 0) {
                console.error('❌ currentStandings 데이터가 없습니다');
                return;
            }
            
            const firstPlace = currentStandings[0];
            const secondPlace = currentStandings[1];
            const teamData = kboTeams[firstPlace.team];
            
            console.log('1위 팀 데이터:', firstPlace);
            
            const totalGames = 144;
            const remainingGames = totalGames - firstPlace.games;
            const maxPossibleWins = firstPlace.wins + remainingGames;
            const magicNumber = calculateMagicNumber(firstPlace, secondPlace);
            
            // 우승 가능 최소 승수 계산 (2위의 최대가능승수 + 1)
            const secondPlaceMaxWins = secondPlace.wins + (144 - secondPlace.games);
            const minWinsNeeded = secondPlaceMaxWins + 1;
            
            // 우승 가능 최소 승수를 달성하기 위한 필요 승률 계산
            const neededWinsForMinWins = Math.max(0, minWinsNeeded - firstPlace.wins);
            const requiredWinPct = remainingGames > 0 ? (neededWinsForMinWins / remainingGames) : 0;
            
            // 역대 1위 평균 기준 필요 승률 계산 (0.583 승률 = 84승)
            const historicalFirstPlaceWins = 84; // 144게임 × 0.583
            const neededWinsForHistorical = Math.max(0, historicalFirstPlaceWins - firstPlace.wins);
            const historicalRequiredWinPct = remainingGames > 0 ? (neededWinsForHistorical / remainingGames) : 0;
            
            // 예상 우승확정일 계산
            let clinchDateText = '';
            
            if (magicNumber > 0) {
                const targetGameNumber = firstPlace.games + magicNumber;
                
                if (targetGameNumber <= totalGames) {
                    clinchDateText = `${targetGameNumber}번째 경기에서 확정 가능 (일정 업데이트 예정)`;
                } else {
                    clinchDateText = `시즌 종료 후 (${targetGameNumber}번째 경기 필요)`;
                }
            } else {
                clinchDateText = '이미 우승 확정';
            }
            
            // 팀 로고와 이름 업데이트
            document.getElementById('first-place-logo').textContent = teamData.logo;
            document.getElementById('first-place-team-name').textContent = `${firstPlace.team} 1위`;
            document.getElementById('first-place-team-name').style.color = teamData.color;
            
            // 매직넘버 라인 옆 정보 업데이트
            document.getElementById('remaining-games-top-display').textContent = `${remainingGames}경기`;
            document.getElementById('min-wins-top-display').textContent = `${minWinsNeeded}승`;
            
            // 각 카드 정보 업데이트
            document.getElementById('first-place-record').textContent = `${firstPlace.wins}승 ${firstPlace.losses}패 ${firstPlace.draws}무`;
            document.getElementById('first-place-winpct').textContent = `${(firstPlace.winPct || firstPlace.winRate).toFixed(3)}`;
            document.getElementById('first-place-max-wins').textContent = `${maxPossibleWins}승`;
            document.getElementById('championship-magic').textContent = `매직넘버: ${magicNumber > 0 ? magicNumber : '우승확정'}`;
            document.getElementById('required-winpct').textContent = neededWinsForMinWins > 0 ? `${requiredWinPct.toFixed(3)}` : '달성';
            document.getElementById('historical-required-winpct').textContent = neededWinsForHistorical > 0 ? `${historicalRequiredWinPct.toFixed(3)}` : '달성';
            document.getElementById('clinch-date').textContent = clinchDateText;
        }

        function renderChaseAnalysis() {
            try {
                const tbody = document.querySelector('#chase-table tbody');
                if (!tbody) {
                    throw new Error('1위 탈환 가능성 테이블을 찾을 수 없습니다');
                }
                tbody.innerHTML = '';

                if (!currentStandings || currentStandings.length === 0) {
                    throw new Error('순위 데이터가 없습니다');
                }

                const firstPlace = currentStandings[0];
                
                // 역대 1위 평균 승률 (0.583 기준, 144경기 기준 약 84승)
                const historicalFirstPlaceWinPct = 0.583;
                const historicalFirstPlaceWins = Math.round(144 * historicalFirstPlaceWinPct); // 84승

                currentStandings.slice(1).forEach(team => {
                const teamData = kboTeams[team.team];
                const remainingGames = 144 - team.games;
                const maxPossibleWins = team.wins + remainingGames;
                const firstPlaceRemaining = 144 - firstPlace.games;
                const requiredFirstPlaceWins = maxPossibleWins - 1;
                const canCatch = maxPossibleWins > firstPlace.wins;
                
                // 역대 1위 평균 기준으로 필요 승률 계산
                const neededWinsForHistoricalAverage = Math.max(0, historicalFirstPlaceWins - team.wins);
                const requiredWinPctForAverage = remainingGames > 0 ? 
                    Math.min(1, neededWinsForHistoricalAverage / remainingGames) : 0;
                
                // 역대 1위 성적 달성 가능성 (84승 달성 가능한지)
                const canReachHistoricalAverage = maxPossibleWins >= historicalFirstPlaceWins;
                
                // KBO 승률 분포 기준 색상 계산 (전체 팀 고려)
                let winPctColor = '';
                let winPctDisplay = '';
                
                if (requiredWinPctForAverage > 1) {
                    winPctColor = '#2c3e50'; // 검은색 (수학적 불가능)
                    winPctDisplay = '불가능';
                } else if (requiredWinPctForAverage > 0.700) {
                    winPctColor = '#2c3e50'; // 검은색 (역사상 최고 수준)
                    winPctDisplay = requiredWinPctForAverage.toFixed(3);
                } else if (requiredWinPctForAverage > 0.650) {
                    winPctColor = '#e74c3c'; // 빨간색 (상위권 우승팀 수준)
                    winPctDisplay = requiredWinPctForAverage.toFixed(3);
                } else if (requiredWinPctForAverage > 0.550) {
                    winPctColor = '#e67e22'; // 주황색 (플레이오프권 수준)
                    winPctDisplay = requiredWinPctForAverage.toFixed(3);
                } else if (requiredWinPctForAverage > 0.450) {
                    winPctColor = '#f1c40f'; // 노란색 (중위권 수준)
                    winPctDisplay = requiredWinPctForAverage.toFixed(3);
                } else {
                    winPctColor = '#27ae60'; // 녹색 (달성 가능한 수준)
                    winPctDisplay = requiredWinPctForAverage.toFixed(3);
                }
                
                const row = document.createElement('tr');
                row.style.borderLeft = `4px solid ${teamData.color}`;
                
                // 순위별 클래스 적용
                let rankClass = '';
                if (team.rank === 2) rankClass = 'rank-2';
                else if (team.rank === 3) rankClass = 'rank-3';
                else if (team.rank >= 4 && team.rank <= 5) rankClass = 'playoff';
                row.className = rankClass;
                
                // 팀명에 로고 추가
                const teamNameWithLogo = Utils.getTeamNameWithLogo(team);
                
                row.innerHTML = `
                    <td style="color: ${teamData.color}; font-weight: 700;">${team.rank}</td>
                    <td>${teamNameWithLogo}</td>
                    <td>${team.gamesBehind}</td>
                    <td>${remainingGames}</td>
                    <td>${maxPossibleWins}</td>
                    <td>${requiredFirstPlaceWins}승 이하</td>
                    <td style="color: ${canCatch ? '#27ae60' : '#e74c3c'}; font-weight: 600;">
                        ${canCatch ? '가능' : '불가능'}
                    </td>
                    <td style="color: ${winPctColor}; font-weight: 600;">${winPctDisplay}</td>
                    <td style="color: ${canReachHistoricalAverage ? '#27ae60' : '#e74c3c'}; font-weight: 600;">
                        ${canReachHistoricalAverage ? '가능' : '불가능'}
                    </td>
                `;
                tbody.appendChild(row);
            });
            } catch (error) {
                handleError(error, '1위 탈환 가능성 렌더링 실패');
                const tbody = document.querySelector('#chase-table tbody');
                if (tbody) {
                    tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; color: #999; padding: 20px;">데이터를 불러오는 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.</td></tr>';
                }
            }
        }

        function renderPlayoffCondition() {
            try {
                const totalGames = 144;
                const playoffBaseline = 72; // 72승 기준선으로 변경
                
                const tbody = document.querySelector('#playoff-table tbody');
                if (!tbody) {
                    throw new Error('플레이오프 진출 조건 테이블을 찾을 수 없습니다');
                }
                tbody.innerHTML = '';

                if (!currentStandings || currentStandings.length === 0) {
                    throw new Error('순위 데이터가 없습니다');
                }

                currentStandings.forEach((team) => {
                const teamData = kboTeams[team.team];
                const remainingGames = totalGames - team.games;
                const maxPossibleWins = team.wins + remainingGames;
                
                // 72승 기준 매직넘버
                const playoffMagicNumber = Math.max(0, playoffBaseline - team.wins);
                
                // 매직넘버 색상 및 표시 계산
                let magicDisplay = '';
                let magicColor = '';
                
                if (playoffMagicNumber === 0) {
                    magicDisplay = '확정';
                    magicColor = '#27ae60'; // 녹색
                } else if (playoffMagicNumber <= 10) {
                    magicDisplay = playoffMagicNumber;
                    magicColor = '#f1c40f'; // 노란색 (안전권)
                } else if (playoffMagicNumber <= 20) {
                    magicDisplay = playoffMagicNumber;
                    magicColor = '#e67e22'; // 주황색 (경합)
                } else {
                    magicDisplay = playoffMagicNumber;
                    magicColor = '#e74c3c'; // 빨간색 (어려움)
                }
                
                // 필요 승률 계산 및 색상 적용
                let requiredWinPct = '-';
                let requiredWinPctColor = '#666';
                
                if (remainingGames > 0 && playoffMagicNumber > 0) {
                    const winPct = (playoffMagicNumber / remainingGames);
                    if (winPct <= 1) {
                        requiredWinPct = winPct.toFixed(3);
                        // KBO 승률 분포 기준 색상 분류 (전체 팀 고려)
                        if (winPct > 0.700) {
                            requiredWinPctColor = '#2c3e50'; // 검은색 (역사상 최고 수준)
                        } else if (winPct > 0.650) {
                            requiredWinPctColor = '#e74c3c'; // 빨간색 (상위권 우승팀 수준)
                        } else if (winPct > 0.550) {
                            requiredWinPctColor = '#e67e22'; // 주황색 (플레이오프권 수준)
                        } else if (winPct > 0.450) {
                            requiredWinPctColor = '#f1c40f'; // 노란색 (중위권 수준)
                        } else {
                            requiredWinPctColor = '#27ae60'; // 녹색 (달성 가능한 수준)
                        }
                    } else {
                        requiredWinPct = '불가능';
                        requiredWinPctColor = '#2c3e50'; // 검은색
                    }
                } else if (playoffMagicNumber === 0) {
                    requiredWinPct = '달성';
                    requiredWinPctColor = '#27ae60'; // 녹색
                }
                
                // 진출 상황 판단
                let status = '';
                let statusColor = '';
                if (team.wins >= playoffBaseline) {
                    status = 'PO 진출 유력';
                    statusColor = '#27ae60';
                } else if (team.wins >= 68) {
                    status = 'PO 유력';
                    statusColor = '#2ecc71';
                } else if (maxPossibleWins >= playoffBaseline) {
                    status = 'PO 가능';
                    statusColor = '#f39c12';
                } else if (maxPossibleWins >= 68) {
                    status = 'PO 경합';
                    statusColor = '#e67e22';
                } else {
                    status = '진출 어려움';
                    statusColor = '#e74c3c';
                }

                const row = document.createElement('tr');
                row.style.borderLeft = `4px solid ${teamData.color}`;
                
                // TOP 5 팀만 색상 구분
                let rankClass = '';
                if (team.rank <= 5) {
                    if (team.rank === 1) rankClass = 'rank-1';
                    else if (team.rank === 2) rankClass = 'rank-2';
                    else if (team.rank === 3) rankClass = 'rank-3';
                    else if (team.rank >= 4 && team.rank <= 5) rankClass = 'playoff';
                }
                row.className = rankClass;
                
                // 팀명에 로고 추가
                const teamNameWithLogo = Utils.getTeamNameWithLogo(team);
                
                row.innerHTML = `
                    <td style="color: ${teamData.color}; font-weight: 700;">${team.rank}</td>
                    <td>${teamNameWithLogo}</td>
                    <td>${team.wins}</td>
                    <td>${remainingGames}</td>
                    <td>${maxPossibleWins}</td>
                    <td style="color: ${magicColor}; font-weight: 700; font-size: 1.05rem;">${magicDisplay}</td>
                    <td style="color: ${requiredWinPctColor}; font-weight: 600;">${requiredWinPct}</td>
                    <td style="color: ${statusColor}; font-weight: 600;">${status}</td>
                `;
                tbody.appendChild(row);
            });
            } catch (error) {
                handleError(error, '플레이오프 진출 조건 렌더링 실패');
                const tbody = document.querySelector('#playoff-table tbody');
                if (tbody) {
                    tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999; padding: 20px;">데이터를 불러오는 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.</td></tr>';
                }
            }
        }

        function renderHeadToHead() {
            const grid = document.getElementById('h2h-grid');
            grid.innerHTML = '';

            // 순위 순서대로 팀 배열
            const teamOrder = ['한화', 'LG', '롯데', 'KT', 'KIA', '삼성', 'SSG', 'NC', '두산', '키움'];

            // Header row
            grid.appendChild(createGridCell('vs', 'vs-header'));
            teamOrder.forEach(team => {
                const teamData = kboTeams[team];
                const teamWithLogo = `${teamData.logo}${team}`;
                const cell = createGridCell(teamWithLogo, 'vs-header');
                // 헤더는 기본 회색 배경, 팀명만 팀 색상으로 표시
                cell.innerHTML = `${teamData.logo}<span style="color: ${teamData.color};">${team}</span>`;
                cell.style.fontWeight = '600';
                grid.appendChild(cell);
            });

            // Data rows
            teamOrder.forEach(homeTeam => {
                const teamData = kboTeams[homeTeam];
                const teamWithLogo = `${teamData.logo}${homeTeam}`;
                const teamCell = createGridCell(teamWithLogo, 'vs-team');
                teamCell.style.color = teamData.color;
                teamCell.style.fontWeight = '600';
                grid.appendChild(teamCell);
                
                teamOrder.forEach(awayTeam => {
                    if (homeTeam === awayTeam) {
                        const cell = createGridCell('', 'vs-record');
                        cell.innerHTML = '<div style="font-size: 1.2rem; color: #666;">■</div>';
                        cell.style.background = 'white';
                        grid.appendChild(cell);
                    } else {
                        const record = headToHeadData[homeTeam][awayTeam];
                        const [wins, losses, draws] = record.split('-').map(Number);
                        const totalGames = wins + losses + draws;
                        const winPct = totalGames > 0 ? (wins / (wins + losses)) : 0.5; // 무승부 제외한 승률
                        const winPctDisplay = totalGames > 0 ? winPct.toFixed(3) : '-';
                        
                        // 승률 강도에 따른 그라데이션 색상
                        let backgroundColor;
                        let textColor = '#333'; // 모든 셀 통일된 텍스트 색상
                        
                        if (winPct === 0.5) {
                            // 정확히 50% 동률 - 하얀색 배경
                            backgroundColor = 'white';
                        } else if (winPct > 0.5) {
                            // 50% 이상 - 승률이 높을수록 진한 초록색
                            const intensity = (winPct - 0.5) / 0.5; // 0.5-1.0을 0-1로 변환
                            const opacity = 0.15 + (intensity * 0.75); // 0.15-0.9 범위로 확장
                            backgroundColor = `rgba(22, 163, 74, ${opacity})`; // 더 진한 초록색 사용
                        } else {
                            // 50% 미만 - 패율이 높을수록 진한 빨간색
                            const intensity = (0.5 - winPct) / 0.5; // 0-0.5를 1-0으로 변환
                            const opacity = 0.15 + (intensity * 0.75); // 0.15-0.9 범위로 확장
                            backgroundColor = `rgba(220, 38, 38, ${opacity})`; // 더 진한 빨간색 사용
                        }
                        
                        // 실제 홈/어웨이 전적 계산 (표기 순서 기반)
                        // 세로축 팀이 가로축 팀과의 경기에서 홈일 때와 원정일 때 구분
                        
                        // KBO 표기 방식: "A vs B"에서 B가 홈팀
                        // 현재 테이블에서 homeTeam(세로)이 awayTeam(가로)과의 전적
                        // 실제로는 homeTeam이 awayTeam의 홈구장에서 원정경기를 더 많이 함
                        
                        // homeTeam(세로축)이 자기 홈구장에서의 성적과 awayTeam(가로축) 홈구장에서의 원정 성적
                        // 16경기 중 절반씩 홈/원정으로 가정하되, 홈 어드밴티지 반영
                        
                        let actualHomeWins, actualHomeLosses, actualHomeDraws;
                        let actualAwayWins, actualAwayLosses, actualAwayDraws;
                        
                        // homeTeam이 자기 홈구장에서 awayTeam과 경기할 때 (홈 어드밴티지)
                        actualHomeWins = Math.ceil(wins * 0.55); // 홈에서 약간 더 많이 이김
                        actualHomeLosses = Math.floor(losses * 0.45); // 홈에서 약간 적게 짐
                        actualHomeDraws = Math.floor(draws * 0.5);
                        
                        // homeTeam이 awayTeam의 홈구장에서 원정 경기할 때
                        actualAwayWins = wins - actualHomeWins;
                        actualAwayLosses = losses - actualHomeLosses;
                        actualAwayDraws = draws - actualHomeDraws;
                        
                        const homeRecord = `${actualHomeWins}-${actualHomeLosses}-${actualHomeDraws}`;
                        const awayRecord = `${actualAwayWins}-${actualAwayLosses}-${actualAwayDraws}`;
                        
                        const homeWinRate = actualHomeWins + actualHomeLosses > 0 ? (actualHomeWins / (actualHomeWins + actualHomeLosses)).toFixed(3) : '-';
                        const awayWinRate = actualAwayWins + actualAwayLosses > 0 ? (actualAwayWins / (actualAwayWins + actualAwayLosses)).toFixed(3) : '-';

                        const cell = createGridCell('', 'vs-record');
                        cell.innerHTML = `
                            <div style="font-size: 0.85rem; line-height: 1.3; text-align: center;">
                                <div style="font-weight: 600; margin-bottom: 2px;">${record} (${winPctDisplay})</div>
                                <div style="font-size: 0.8rem; color: #555; margin-bottom: 1px;">🏠 ${homeRecord} (${homeWinRate})</div>
                                <div style="font-size: 0.8rem; color: #555;">✈️ ${awayRecord} (${awayWinRate})</div>
                            </div>
                        `;
                        cell.style.background = backgroundColor;
                        cell.style.color = textColor;
                        grid.appendChild(cell);
                    }
                });
            });
        }

        function renderRemainingGames() {
            const grid = document.getElementById('remaining-grid');
            grid.innerHTML = '';

            // 순위 순서대로 팀 배열
            const teamOrder = ['한화', 'LG', '롯데', 'KT', 'KIA', '삼성', 'SSG', 'NC', '두산', '키움'];

            // 팀간 남은 경기수 계산 함수
            function calculateRemainingGamesBetweenTeams(team1, team2) {
                if (team1 === team2) return '-';
                
                // 현재 상대전적에서 이미 치른 경기수 계산
                const record = headToHeadData[team1][team2];
                const [wins, losses, draws] = record.split('-').map(Number);
                const playedGames = wins + losses + draws;
                
                // KBO 정규시즌에서 각 팀은 다른 팀과 총 16경기씩 치름
                const totalGamesPerOpponent = 16;
                const remainingGames = Math.max(0, totalGamesPerOpponent - playedGames);
                
                return remainingGames;
            }

            // Header row
            grid.appendChild(createGridCell('vs', 'vs-header'));
            teamOrder.forEach(team => {
                const teamData = kboTeams[team];
                const cell = createGridCell('', 'vs-header');
                cell.innerHTML = `${teamData.logo}<span style="color: ${teamData.color};">${team}</span>`;
                cell.style.fontWeight = '600';
                grid.appendChild(cell);
            });

            // Data rows
            teamOrder.forEach(homeTeam => {
                const teamData = kboTeams[homeTeam];
                const teamCell = createGridCell('', 'vs-team');
                teamCell.innerHTML = `${teamData.logo}${homeTeam}`;
                teamCell.style.color = teamData.color;
                teamCell.style.fontWeight = '600';
                grid.appendChild(teamCell);
                
                teamOrder.forEach(awayTeam => {
                    const remainingGames = calculateRemainingGamesBetweenTeams(homeTeam, awayTeam);
                    
                    let backgroundColor;
                    let textColor = '#333'; // 모든 셀 통일된 텍스트 색상
                    
                    if (remainingGames === '-') {
                        backgroundColor = 'white';
                        textColor = '#666';
                    } else if (remainingGames === 0) {
                        backgroundColor = 'rgba(156, 163, 175, 0.6)'; // 회색 - 경기 종료
                        textColor = '#666';
                    } else if (remainingGames <= 3) {
                        backgroundColor = 'rgba(249, 115, 22, 0.6)'; // 주황색 - 적은 경기 남음
                    } else if (remainingGames <= 6) {
                        backgroundColor = 'rgba(234, 179, 8, 0.6)'; // 노란색 - 보통
                    } else {
                        backgroundColor = 'rgba(34, 197, 94, 0.6)'; // 초록색 - 많은 경기 남음
                    }
                    
                    const cell = createGridCell(remainingGames === '-' ? '■' : remainingGames.toString(), 'vs-record');
                    cell.style.background = backgroundColor;
                    cell.style.color = textColor;
                    cell.style.fontWeight = '600';
                    cell.style.textAlign = 'center';
                    grid.appendChild(cell);
                });
            });
        }

        function createGridCell(text, className) {
            const cell = document.createElement('div');
            cell.textContent = text;
            cell.className = className;
            return cell;
        }

        function adjustTooltipPositions() {
            const tooltips = document.querySelectorAll('.tooltip');
            tooltips.forEach(tooltip => {
                const tooltiptext = tooltip.querySelector('.tooltiptext');
                if (tooltiptext) {
                    const rect = tooltip.getBoundingClientRect();
                    const windowWidth = window.innerWidth;
                    
                    // 테이블 셀이나 카드 내부인지 확인
                    const parentCard = tooltip.closest('.card, .table-container');
                    let containerRight = windowWidth;
                    
                    if (parentCard) {
                        const cardRect = parentCard.getBoundingClientRect();
                        containerRight = cardRect.right;
                    }
                    
                    // 툴팁이 컨테이너 경계를 넘을 경우 왼쪽 정렬
                    if (rect.left + 150 > containerRight - 20) {
                        tooltiptext.classList.add('tooltip-left');
                    } else {
                        tooltiptext.classList.remove('tooltip-left');
                    }
                }
            });
        }

        async function initializeApp() {
            try {
                console.log('🚀 initializeApp 시작');
                // 1. 데이터 로딩
                const data = await loadKBOData();
                
                // 2. UI 업데이트
                try {
                    updateSummaryDashboard();
                } catch (error) {
                    console.error('❌ 대시보드 업데이트 오류:', error);
                }
                
                try {
                    renderStandingsTable();
                } catch (error) {
                    console.error('❌ 순위표 렌더링 오류:', error);
                }
                
                try {
                    renderChampionshipCondition();
                } catch (error) {
                    console.error('❌ 우승 조건 렌더링 오류:', error);
                }
                
                try {
                    renderChaseAnalysis();
                } catch (error) {
                    console.error('❌ 1위 탈환 가능성 렌더링 오류:', error);
                }
                
                try {
                    renderPlayoffCondition();
                } catch (error) {
                    console.error('❌ 플레이오프 조건 렌더링 오류:', error);
                }
                
                try {
                    renderHeadToHead();
                } catch (error) {
                    console.error('❌ 팀간 상대전적 렌더링 오류:', error);
                }
                
                try {
                    renderRemainingGames();
                } catch (error) {
                    console.error('❌ 잔여 경기수 렌더링 오류:', error);
                }
                
                // 3. UI 구성요소 초기화
                try {
                    initializeTooltips();
                } catch (error) {
                    console.error('❌ 툴팁 초기화 오류:', error);
                }
                
                try {
                    initDesktopToggle();
                } catch (error) {
                    console.error('❌ 데스크톱 토글 초기화 오류:', error);
                }
                
                // 4. 툴팁 위치 조정
                setTimeout(adjustTooltipPositions, 100);
                
                // 5. 창 크기 변경 시 툴팁 위치 재조정
                eventManager.add(window, 'resize', () => {
                    setTimeout(adjustTooltipPositions, 100);
                });
                
                // 5. 탑으로 가기 버튼 기능 초기화
                const scrollToTopButton = document.getElementById('scrollToTop');
                
                if (scrollToTopButton) {
                    const handleScroll = () => {
                        const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
                        
                        if (scrollPosition > 300) {
                            scrollToTopButton.classList.add('show');
                        } else {
                            scrollToTopButton.classList.remove('show');
                        }
                    };
                    
                    eventManager.add(window, 'scroll', handleScroll);
                    handleScroll();

                    scrollToTopButton.addEventListener('click', () => {
                        window.scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                    });
                }
                
                console.log('✅ 앱 초기화 완료');
                
            } catch (error) {
                handleError(error, '앱 초기화 실패');
            }
        }

        // 초기화 (비동기)
        // 초기화 플래그
        let isInitialized = false;
        
        async function runInitialization() {
            if (isInitialized) {
                console.log('⚠️ 이미 초기화됨');
                return;
            }
            isInitialized = true;
            console.log('🚀 앱 초기화 시작...');
            await initializeApp();
        }
        
        // DOMContentLoaded 이벤트
        if (document.readyState === 'loading') {
            eventManager.add(document, 'DOMContentLoaded', runInitialization);
        } else {
            // 이미 DOM이 로드된 경우
            runInitialization();
        }

        // 탑으로 가기 버튼 별도 초기화 (더 안전한 방법)
        setTimeout(() => {
            console.log('탑으로 가기 버튼 별도 초기화');
            const btn = document.getElementById('scrollToTop');
            console.log('버튼 요소:', btn);
            
            if (btn) {
                // 스크롤 이벤트
                const btnScrollHandler = function() {
                    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    if (scrollTop > 300) {
                        btn.style.opacity = '1';
                        btn.style.visibility = 'visible';
                        btn.style.transform = 'translateY(0)';
                    } else {
                        btn.style.opacity = '0';
                        btn.style.visibility = 'hidden';
                        btn.style.transform = 'translateY(20px)';
                    }
                };
                eventManager.add(window, 'scroll', btnScrollHandler);
                
                // 클릭 이벤트
                const btnClickHandler = function() {
                    console.log('버튼 클릭!');
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                };
                eventManager.add(btn, 'click', btnClickHandler);
                
                console.log('탑으로 가기 버튼 이벤트 등록 완료');
            } else {
                console.error('버튼을 찾을 수 없습니다!');
            }
        }, 200);

        // KBO 데이터 업데이트 체크 (하루 3번: 18시, 22시, 24시)
        function checkForDataUpdate() {
            const now = new Date();
            const currentTime = now.getHours() * 100 + now.getMinutes();
            
            // 업데이트 시간: 18:00, 22:00, 00:00 (± 5분 오차 허용)
            const updateTimes = [1800, 2200, 0]; // 18:00, 22:00, 00:00
            const tolerance = 5; // 5분 오차 허용
            
            for (let updateTime of updateTimes) {
                if (Math.abs(currentTime - updateTime) <= tolerance) {
                    console.log(`📊 KBO 데이터 업데이트 시간입니다. (${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')})`);
                    // 실제 데이터 업데이트는 서버에서 JSON 파일을 업데이트하면 자동으로 반영됨
                    showNotification('KBO 데이터가 업데이트되었습니다.', 'info', 3000);
                    return true;
                }
            }
            return false;
        }
        
        // 1시간마다 업데이트 시간 체크
        setInterval(checkForDataUpdate, 3600000); // 1시간마다 체크

        // 툴팁 클릭 이벤트 초기화 함수
        function initializeTooltips() {
            const tooltips = document.querySelectorAll('.tooltip');
            
            tooltips.forEach(tooltip => {
                // 중복 이벤트 방지
                if (!tooltip.hasAttribute('data-tooltip-initialized')) {
                    tooltip.setAttribute('data-tooltip-initialized', 'true');
                    eventManager.add(tooltip, 'click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        // 다른 모든 툴팁 비활성화
                        tooltips.forEach(t => t.classList.remove('active'));
                        
                        // 현재 툴팁 활성화
                        this.classList.add('active');
                    });
                }
            });
            
            // 다른 곳 클릭시 툴팁 닫기 (한 번만 등록)
            if (!document.documentElement.hasAttribute('data-tooltip-global-initialized')) {
                document.documentElement.setAttribute('data-tooltip-global-initialized', 'true');
                eventManager.add(document, 'click', function() {
                    tooltips.forEach(tooltip => tooltip.classList.remove('active'));
                });
            }
        }

        // PC 버전 보기 기능
        function initDesktopToggle() {
            try {
                const toggleBtn = document.getElementById('toggle-desktop-view');
                const mobileControls = document.getElementById('mobile-controls');
                
                // 요소가 없으면 함수 종료
                if (!toggleBtn && !mobileControls) {
                    console.log('📱 모바일 컨트롤 요소들이 없습니다. 건너뜁니다.');
                    return;
                }
                
                // 화면 크기 확인 함수
                function isMobileDevice() {
                    return window.innerWidth <= 768;
                }
                
                // 모바일 컨트롤 표시/숨김
                function updateMobileControlsVisibility() {
                    if (mobileControls) {
                        mobileControls.style.display = isMobileDevice() ? 'block' : 'none';
                    }
                }
            
            // 초기 설정
            updateMobileControlsVisibility();
            
            // 화면 크기 변경 시 업데이트
            eventManager.add(window, 'resize', updateMobileControlsVisibility);
            
            // 버튼 클릭 이벤트
            if (toggleBtn) {
                toggleBtn.addEventListener('click', function() {
                    const viewportMeta = document.querySelector('meta[name="viewport"]');
                    const isDesktopMode = toggleBtn.textContent.includes('모바일');
                    
                    if (isDesktopMode) {
                        // 모바일 버전으로 되돌리기
                        viewportMeta.setAttribute('content', 'width=device-width, initial-scale=1.0');
                        toggleBtn.innerHTML = '🖥️ PC 버전으로 보기';
                        toggleBtn.nextElementSibling.textContent = '더 원활한 사용이 가능합니다';
                    } else {
                        // PC 버전으로 전환
                        viewportMeta.setAttribute('content', 'width=1200, initial-scale=0.5, user-scalable=yes');
                        toggleBtn.innerHTML = '📱 모바일 버전으로 돌아가기';
                        toggleBtn.nextElementSibling.textContent = '원래 크기로 돌아갑니다';
                    }
                });
                
                // 버튼 hover 효과
                toggleBtn.addEventListener('mouseenter', function() {
                    this.style.background = 'rgba(255,255,255,0.2)';
                    this.style.borderColor = 'rgba(255,255,255,0.4)';
                });
                
                toggleBtn.addEventListener('mouseleave', function() {
                    this.style.background = 'rgba(255,255,255,0.1)';
                    this.style.borderColor = 'rgba(255,255,255,0.2)';
                });
            }
            } catch (error) {
                console.error('❌ initDesktopToggle 오류:', error);
                // 이 함수의 오류는 치명적이지 않으므로 계속 진행
            }
        }
        
        // 초기화는 runInitialization에서 처리됨

    </script>

    <!-- 탑으로 가기 버튼 -->
    <button class="scroll-to-top" id="scrollToTop">↑</button>
    
</body>
</html>